{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{SendOutlined}from\"@ant-design/icons\";import{Button,Input,Tooltip}from\"antd\";import{useLookupAddress}from\"eth-hooks\";import React,{useCallback,useState,useEffect}from\"react\";import Blockies from\"react-blockies\";import{Transactor}from\"../helpers\";import Wallet from\"./Wallet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"ethers\"),utils=_require.utils;// improved a bit by converting address to ens if it exists\n// added option to directly input ens name\n// added placeholder option\n/*\r\n  ~ What it does? ~\r\n\r\n  Displays a local faucet to send ETH to given address, also wallet is provided\r\n\r\n  ~ How can I use? ~\r\n\r\n  <Faucet\r\n    price={price}\r\n    localProvider={localProvider}\r\n    ensProvider={mainnetProvider}\r\n    placeholder={\"Send local faucet\"}\r\n  />\r\n\r\n  ~ Features ~\r\n\r\n  - Provide price={price} of ether and convert between USD and ETH in a wallet\r\n  - Provide localProvider={localProvider} to be able to send ETH to given address\r\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\r\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\r\n              works both in input field & wallet\r\n  - Provide placeholder=\"Send local faucet\" value for the input\r\n*/export default function Faucet(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),faucetAddress=_useState4[0],setFaucetAddress=_useState4[1];useEffect(function(){var getFaucetAddress=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _faucetAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!props.localProvider){_context.next=6;break;}_context.next=3;return props.localProvider.listAccounts();case 3:_faucetAddress=_context.sent;setFaucetAddress(_faucetAddress[0]);console.log(_faucetAddress);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getFaucetAddress(){return _ref.apply(this,arguments);};}();getFaucetAddress();},[props.localProvider]);var blockie;if(address&&typeof address.toLowerCase===\"function\"){blockie=/*#__PURE__*/_jsx(Blockies,{seed:address.toLowerCase(),size:8,scale:4});}else{blockie=/*#__PURE__*/_jsx(\"div\",{});}var ens=useLookupAddress(props.ensProvider,address);var updateAddress=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newValue){var _address,possibleAddress;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeof newValue!==\"undefined\")){_context2.next=13;break;}_address=newValue;if(!(_address.indexOf(\".eth\")>0||_address.indexOf(\".xyz\")>0)){_context2.next=12;break;}_context2.prev=3;_context2.next=6;return props.ensProvider.resolveName(_address);case 6:possibleAddress=_context2.sent;if(possibleAddress){_address=possibleAddress;}// eslint-disable-next-line no-empty\n_context2.next=12;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);case 12:setAddress(_address);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10]]);}));return function(_x){return _ref2.apply(this,arguments);};}(),[props.ensProvider,props.onChange]);var tx=Transactor(props.localProvider);return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Input,{size:\"large\",placeholder:props.placeholder?props.placeholder:\"local faucet\",prefix:blockie// value={address}\n,value:ens||address,onChange:function onChange(e){// setAddress(e.target.value);\nupdateAddress(e.target.value);},suffix:/*#__PURE__*/_jsxs(Tooltip,{title:\"Faucet: Send local ether to an address.\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){tx({to:address,value:utils.parseEther(\"0.01\")});setAddress(\"\");},shape:\"circle\",icon:/*#__PURE__*/_jsx(SendOutlined,{})}),/*#__PURE__*/_jsx(Wallet,{color:\"#888888\",provider:props.localProvider,ensProvider:props.ensProvider,price:props.price,address:faucetAddress})]})})});}","map":{"version":3,"sources":["C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/packages/react-app/src/components/Faucet.jsx"],"names":["SendOutlined","Button","Input","Tooltip","useLookupAddress","React","useCallback","useState","useEffect","Blockies","Transactor","Wallet","require","utils","Faucet","props","address","setAddress","faucetAddress","setFaucetAddress","getFaucetAddress","localProvider","listAccounts","_faucetAddress","console","log","blockie","toLowerCase","ens","ensProvider","updateAddress","newValue","indexOf","resolveName","possibleAddress","onChange","tx","placeholder","e","target","value","to","parseEther","price"],"mappings":"+hBAAA,OAASA,YAAT,KAA6B,mBAA7B,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,OAAxB,KAAuC,MAAvC,CACA,OAASC,gBAAT,KAAiC,WAAjC,CACA,MAAOC,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,QAA7B,CAAuCC,SAAvC,KAAwD,OAAxD,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,OAASC,UAAT,KAA2B,YAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAEA,aAAkBC,OAAO,CAAC,QAAD,CAAzB,CAAQC,KAAR,UAAQA,KAAR,CAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAEA,cAAe,SAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACpC,cAA8BR,QAAQ,EAAtC,wCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAA0CV,QAAQ,EAAlD,yCAAOW,aAAP,eAAsBC,gBAAtB,eAEAX,SAAS,CAAC,UAAM,CACd,GAAMY,CAAAA,gBAAgB,0FAAG,0JACnBL,KAAK,CAACM,aADa,+CAEQN,CAAAA,KAAK,CAACM,aAAN,CAAoBC,YAApB,EAFR,QAEfC,cAFe,eAGrBJ,gBAAgB,CAACI,cAAc,CAAC,CAAD,CAAf,CAAhB,CACAC,OAAO,CAACC,GAAR,CAAYF,cAAZ,EAJqB,sDAAH,kBAAhBH,CAAAA,gBAAgB,0CAAtB,CAOAA,gBAAgB,GACjB,CATQ,CASN,CAACL,KAAK,CAACM,aAAP,CATM,CAAT,CAWA,GAAIK,CAAAA,OAAJ,CACA,GAAIV,OAAO,EAAI,MAAOA,CAAAA,OAAO,CAACW,WAAf,GAA+B,UAA9C,CAA0D,CACxDD,OAAO,cAAG,KAAC,QAAD,EAAU,IAAI,CAAEV,OAAO,CAACW,WAAR,EAAhB,CAAuC,IAAI,CAAE,CAA7C,CAAgD,KAAK,CAAE,CAAvD,EAAV,CACD,CAFD,IAEO,CACLD,OAAO,cAAG,cAAV,CACD,CAED,GAAME,CAAAA,GAAG,CAAGxB,gBAAgB,CAACW,KAAK,CAACc,WAAP,CAAoBb,OAApB,CAA5B,CAEA,GAAMc,CAAAA,aAAa,CAAGxB,WAAW,2FAC/B,kBAAMyB,QAAN,wJACM,MAAOA,CAAAA,QAAP,GAAoB,WAD1B,4BAEQf,QAFR,CAEkBe,QAFlB,MAGQf,QAAO,CAACgB,OAAR,CAAgB,MAAhB,EAA0B,CAA1B,EAA+BhB,QAAO,CAACgB,OAAR,CAAgB,MAAhB,EAA0B,CAHjE,oEAKsCjB,CAAAA,KAAK,CAACc,WAAN,CAAkBI,WAAlB,CAA8BjB,QAA9B,CALtC,QAKckB,eALd,gBAMQ,GAAIA,eAAJ,CAAqB,CACnBlB,QAAO,CAAGkB,eAAV,CACD,CACD;AATR,6FAYIjB,UAAU,CAACD,QAAD,CAAV,CAZJ,uEAD+B,gEAgB/B,CAACD,KAAK,CAACc,WAAP,CAAoBd,KAAK,CAACoB,QAA1B,CAhB+B,CAAjC,CAmBA,GAAMC,CAAAA,EAAE,CAAG1B,UAAU,CAACK,KAAK,CAACM,aAAP,CAArB,CAEA,mBACE,mCACE,KAAC,KAAD,EACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAEN,KAAK,CAACsB,WAAN,CAAoBtB,KAAK,CAACsB,WAA1B,CAAwC,cAFvD,CAGE,MAAM,CAAEX,OACR;AAJF,CAKE,KAAK,CAAEE,GAAG,EAAIZ,OALhB,CAME,QAAQ,CAAE,kBAAAsB,CAAC,CAAI,CACb;AACAR,aAAa,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,CACD,CATH,CAUE,MAAM,cACJ,MAAC,OAAD,EAAS,KAAK,CAAC,yCAAf,wBACE,KAAC,MAAD,EACE,OAAO,CAAE,kBAAM,CACbJ,EAAE,CAAC,CACDK,EAAE,CAAEzB,OADH,CAEDwB,KAAK,CAAE3B,KAAK,CAAC6B,UAAN,CAAiB,MAAjB,CAFN,CAAD,CAAF,CAIAzB,UAAU,CAAC,EAAD,CAAV,CACD,CAPH,CAQE,KAAK,CAAC,QARR,CASE,IAAI,cAAE,KAAC,YAAD,IATR,EADF,cAYE,KAAC,MAAD,EACE,KAAK,CAAC,SADR,CAEE,QAAQ,CAAEF,KAAK,CAACM,aAFlB,CAGE,WAAW,CAAEN,KAAK,CAACc,WAHrB,CAIE,KAAK,CAAEd,KAAK,CAAC4B,KAJf,CAKE,OAAO,CAAEzB,aALX,EAZF,GAXJ,EADF,EADF,CAqCD","sourcesContent":["import { SendOutlined } from \"@ant-design/icons\";\r\nimport { Button, Input, Tooltip } from \"antd\";\r\nimport { useLookupAddress } from \"eth-hooks\";\r\nimport React, { useCallback, useState, useEffect } from \"react\";\r\nimport Blockies from \"react-blockies\";\r\nimport { Transactor } from \"../helpers\";\r\nimport Wallet from \"./Wallet\";\r\n\r\nconst { utils } = require(\"ethers\");\r\n\r\n// improved a bit by converting address to ens if it exists\r\n// added option to directly input ens name\r\n// added placeholder option\r\n\r\n/*\r\n  ~ What it does? ~\r\n\r\n  Displays a local faucet to send ETH to given address, also wallet is provided\r\n\r\n  ~ How can I use? ~\r\n\r\n  <Faucet\r\n    price={price}\r\n    localProvider={localProvider}\r\n    ensProvider={mainnetProvider}\r\n    placeholder={\"Send local faucet\"}\r\n  />\r\n\r\n  ~ Features ~\r\n\r\n  - Provide price={price} of ether and convert between USD and ETH in a wallet\r\n  - Provide localProvider={localProvider} to be able to send ETH to given address\r\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\r\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\r\n              works both in input field & wallet\r\n  - Provide placeholder=\"Send local faucet\" value for the input\r\n*/\r\n\r\nexport default function Faucet(props) {\r\n  const [address, setAddress] = useState();\r\n  const [faucetAddress, setFaucetAddress] = useState();\r\n\r\n  useEffect(() => {\r\n    const getFaucetAddress = async () => {\r\n      if (props.localProvider) {\r\n        const _faucetAddress = await props.localProvider.listAccounts();\r\n        setFaucetAddress(_faucetAddress[0]);\r\n        console.log(_faucetAddress);\r\n      }\r\n    };\r\n    getFaucetAddress();\r\n  }, [props.localProvider]);\r\n\r\n  let blockie;\r\n  if (address && typeof address.toLowerCase === \"function\") {\r\n    blockie = <Blockies seed={address.toLowerCase()} size={8} scale={4} />;\r\n  } else {\r\n    blockie = <div />;\r\n  }\r\n\r\n  const ens = useLookupAddress(props.ensProvider, address);\r\n\r\n  const updateAddress = useCallback(\r\n    async newValue => {\r\n      if (typeof newValue !== \"undefined\") {\r\n        let address = newValue;\r\n        if (address.indexOf(\".eth\") > 0 || address.indexOf(\".xyz\") > 0) {\r\n          try {\r\n            const possibleAddress = await props.ensProvider.resolveName(address);\r\n            if (possibleAddress) {\r\n              address = possibleAddress;\r\n            }\r\n            // eslint-disable-next-line no-empty\r\n          } catch (e) {}\r\n        }\r\n        setAddress(address);\r\n      }\r\n    },\r\n    [props.ensProvider, props.onChange],\r\n  );\r\n\r\n  const tx = Transactor(props.localProvider);\r\n\r\n  return (\r\n    <span>\r\n      <Input\r\n        size=\"large\"\r\n        placeholder={props.placeholder ? props.placeholder : \"local faucet\"}\r\n        prefix={blockie}\r\n        // value={address}\r\n        value={ens || address}\r\n        onChange={e => {\r\n          // setAddress(e.target.value);\r\n          updateAddress(e.target.value);\r\n        }}\r\n        suffix={\r\n          <Tooltip title=\"Faucet: Send local ether to an address.\">\r\n            <Button\r\n              onClick={() => {\r\n                tx({\r\n                  to: address,\r\n                  value: utils.parseEther(\"0.01\"),\r\n                });\r\n                setAddress(\"\");\r\n              }}\r\n              shape=\"circle\"\r\n              icon={<SendOutlined />}\r\n            />\r\n            <Wallet\r\n              color=\"#888888\"\r\n              provider={props.localProvider}\r\n              ensProvider={props.ensProvider}\r\n              price={props.price}\r\n              address={faucetAddress}\r\n            />\r\n          </Tooltip>\r\n        }\r\n      />\r\n    </span>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}