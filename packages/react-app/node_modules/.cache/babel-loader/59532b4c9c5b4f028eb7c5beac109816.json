{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useState, useEffect } from \"react\";\nimport useOnBlock from \"./OnBlock\";\nimport usePoller from \"./Poller\";\n/*\r\n  ~ What it does? ~\r\n\r\n  Gets your balance in ETH from given address and provider\r\n\r\n  ~ How can I use? ~\r\n\r\n  const yourLocalBalance = useBalance(localProvider, address);\r\n\r\n  ~ Features ~\r\n\r\n  - Provide address and get balance corresponding to given address\r\n  - Change provider to access balance on different chains (ex. mainnetProvider)\r\n  - If no pollTime is passed, the balance will update on every new block\r\n*/\n\nconst DEBUG = false;\nexport default function useBalance(provider, address) {\n  _s();\n\n  let pollTime = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const [balance, setBalance] = useState();\n  const pollBalance = useCallback(async (provider, address) => {\n    if (provider && address) {\n      const newBalance = await provider.getBalance(address);\n\n      if (newBalance !== balance) {\n        setBalance(newBalance);\n      }\n    }\n  }, [provider, address]); // Only pass a provider to watch on a block if there is no pollTime\n\n  useOnBlock(pollTime === 0 && provider, () => {\n    if (provider && address && pollTime === 0) {\n      pollBalance(provider, address);\n    }\n  }); // Update balance when the address or provider changes\n\n  useEffect(() => {\n    if (address && provider) pollBalance(provider, address);\n  }, [address, provider, pollBalance]); // Use a poller if a pollTime is provided\n\n  usePoller(async () => {\n    if (provider && address && pollTime > 0) {\n      if (DEBUG) console.log(\"polling!\", address);\n      pollBalance();\n    }\n  }, pollTime, provider && address);\n  return balance;\n}\n\n_s(useBalance, \"dI9sIOfa/1wFvhHUBDatOgwy61Y=\", false, function () {\n  return [useOnBlock, usePoller];\n});","map":{"version":3,"sources":["C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/packages/react-app/src/hooks/Balance.js"],"names":["useCallback","useState","useEffect","useOnBlock","usePoller","DEBUG","useBalance","provider","address","pollTime","balance","setBalance","pollBalance","newBalance","getBalance","console","log"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,QAAtB,EAAgCC,SAAhC,QAAiD,OAAjD;AACA,OAAOC,UAAP,MAAuB,WAAvB;AACA,OAAOC,SAAP,MAAsB,UAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,KAAK,GAAG,KAAd;AAEA,eAAe,SAASC,UAAT,CAAoBC,QAApB,EAA8BC,OAA9B,EAAqD;AAAA;;AAAA,MAAdC,QAAc,uEAAH,CAAG;AAClE,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,EAAtC;AAEA,QAAMW,WAAW,GAAGZ,WAAW,CAC7B,OAAOO,QAAP,EAAiBC,OAAjB,KAA6B;AAC3B,QAAID,QAAQ,IAAIC,OAAhB,EAAyB;AACvB,YAAMK,UAAU,GAAG,MAAMN,QAAQ,CAACO,UAAT,CAAoBN,OAApB,CAAzB;;AACA,UAAIK,UAAU,KAAKH,OAAnB,EAA4B;AAC1BC,QAAAA,UAAU,CAACE,UAAD,CAAV;AACD;AACF;AACF,GAR4B,EAS7B,CAACN,QAAD,EAAWC,OAAX,CAT6B,CAA/B,CAHkE,CAelE;;AACAL,EAAAA,UAAU,CAACM,QAAQ,KAAK,CAAb,IAAkBF,QAAnB,EAA6B,MAAM;AAC3C,QAAIA,QAAQ,IAAIC,OAAZ,IAAuBC,QAAQ,KAAK,CAAxC,EAA2C;AACzCG,MAAAA,WAAW,CAACL,QAAD,EAAWC,OAAX,CAAX;AACD;AACF,GAJS,CAAV,CAhBkE,CAsBlE;;AACAN,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIM,OAAO,IAAID,QAAf,EAAyBK,WAAW,CAACL,QAAD,EAAWC,OAAX,CAAX;AAC1B,GAFQ,EAEN,CAACA,OAAD,EAAUD,QAAV,EAAoBK,WAApB,CAFM,CAAT,CAvBkE,CA2BlE;;AACAR,EAAAA,SAAS,CACP,YAAY;AACV,QAAIG,QAAQ,IAAIC,OAAZ,IAAuBC,QAAQ,GAAG,CAAtC,EAAyC;AACvC,UAAIJ,KAAJ,EAAWU,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBR,OAAxB;AACXI,MAAAA,WAAW;AACZ;AACF,GANM,EAOPH,QAPO,EAQPF,QAAQ,IAAIC,OARL,CAAT;AAWA,SAAOE,OAAP;AACD;;GAxCuBJ,U;UAgBtBH,U,EAYAC,S","sourcesContent":["import { useCallback, useState, useEffect } from \"react\";\r\nimport useOnBlock from \"./OnBlock\";\r\nimport usePoller from \"./Poller\";\r\n\r\n/*\r\n  ~ What it does? ~\r\n\r\n  Gets your balance in ETH from given address and provider\r\n\r\n  ~ How can I use? ~\r\n\r\n  const yourLocalBalance = useBalance(localProvider, address);\r\n\r\n  ~ Features ~\r\n\r\n  - Provide address and get balance corresponding to given address\r\n  - Change provider to access balance on different chains (ex. mainnetProvider)\r\n  - If no pollTime is passed, the balance will update on every new block\r\n*/\r\n\r\nconst DEBUG = false;\r\n\r\nexport default function useBalance(provider, address, pollTime = 0) {\r\n  const [balance, setBalance] = useState();\r\n\r\n  const pollBalance = useCallback(\r\n    async (provider, address) => {\r\n      if (provider && address) {\r\n        const newBalance = await provider.getBalance(address);\r\n        if (newBalance !== balance) {\r\n          setBalance(newBalance);\r\n        }\r\n      }\r\n    },\r\n    [provider, address],\r\n  );\r\n\r\n  // Only pass a provider to watch on a block if there is no pollTime\r\n  useOnBlock(pollTime === 0 && provider, () => {\r\n    if (provider && address && pollTime === 0) {\r\n      pollBalance(provider, address);\r\n    }\r\n  });\r\n\r\n  // Update balance when the address or provider changes\r\n  useEffect(() => {\r\n    if (address && provider) pollBalance(provider, address);\r\n  }, [address, provider, pollBalance]);\r\n\r\n  // Use a poller if a pollTime is provided\r\n  usePoller(\r\n    async () => {\r\n      if (provider && address && pollTime > 0) {\r\n        if (DEBUG) console.log(\"polling!\", address);\r\n        pollBalance();\r\n      }\r\n    },\r\n    pollTime,\r\n    provider && address,\r\n  );\r\n\r\n  return balance;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}