{"ast":null,"code":"import _slicedToArray from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import WalletConnectProvider from\"@walletconnect/web3-provider\";import WalletLink from\"walletlink\";import{Alert,Button,Col,Menu,Row,Spin,Typography}from\"antd\";import\"antd/dist/antd.css\";import React,{useCallback,useEffect,useState}from\"react\";import{BrowserRouter,Link,Route,Switch}from\"react-router-dom\";import Web3Modal from\"web3modal\";import\"./App.css\";import{Account,Contract,Faucet,GasGauge,Header,Ramp,ThemeSwitch}from\"./components\";import{INFURA_ID,NETWORK,NETWORKS}from\"./constants\";import{Transactor}from\"./helpers\";import{useBalance,useContractLoader,useContractReader,useEventListener,useExchangePrice,useGasPrice,useUserSigner,useCurrentDistribution}from\"./hooks\";import QuadraticDiplomacyVote from\"./views/QuadraticDiplomacyVote\";import QuadraticDiplomacyReward from\"./views/QuadraticDiplomacyReward\";import QuadraticDiplomacyCreate from\"./views/QuadraticDiplomacyCreate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"ethers\"),ethers=_require.ethers;var Title=Typography.Title;/*\r\n    Welcome to üèó scaffold-eth !\r\n\r\n    Code:\r\n    https://github.com/austintgriffith/scaffold-eth\r\n\r\n    Support:\r\n    https://t.me/joinchat/KByvmRe5wkR-8F_zz6AjpA\r\n    or DM @austingriffith on twitter or telegram\r\n\r\n    You should get your own Infura.io ID and put it in `constants.js`\r\n    (this is your connection to the main Ethereum network for ENS etc.)\r\n\r\n\r\n    üåè EXTERNAL CONTRACTS:\r\n    You can also bring in contract artifacts in `constants.js`\r\n    (and then use the `useExternalContractLoader()` hook!)\r\n*/ /// üì° What chain are your contracts deployed to?\nvar targetNetwork=NETWORKS.ropsten;var serverUrl=\"http://localhost:45622/\";// üò¨ Sorry for all the console logging\nvar DEBUG=true;var NETWORKCHECK=true;// üõ∞ providers\nif(DEBUG)console.log(\"üì° Connecting to Mainnet Ethereum\");// const mainnetProvider = getDefaultProvider(\"mainnet\", { infura: INFURA_ID, etherscan: ETHERSCAN_KEY, quorum: 1 });\n// const mainnetProvider = new InfuraProvider(\"mainnet\",INFURA_ID);\n//\n// attempt to connect to our own scaffold eth rpc and if that fails fall back to infura...\n// Using StaticJsonRpcProvider as the chainId won't change see https://github.com/ethers-io/ethers.js/issues/901\nvar scaffoldEthProvider=navigator.onLine?new ethers.providers.StaticJsonRpcProvider(\"https://rpc.scaffoldeth.io:48544\"):null;var mainnetInfura=navigator.onLine?new ethers.providers.StaticJsonRpcProvider(\"https://mainnet.infura.io/v3/\"+INFURA_ID):null;// ( ‚ö†Ô∏è Getting \"failed to meet quorum\" errors? Check your INFURA_I )\n// üè† Your local provider is usually pointed at your local blockchain\nvar localProviderUrl=targetNetwork.rpcUrl;// as you deploy to other networks you can set REACT_APP_PROVIDER=https://dai.poa.network in packages/react-app/.env\nvar localProviderUrlFromEnv=process.env.REACT_APP_PROVIDER?process.env.REACT_APP_PROVIDER:localProviderUrl;if(DEBUG)console.log(\"üè† Connecting to provider:\",localProviderUrlFromEnv);var localProvider=new ethers.providers.StaticJsonRpcProvider(localProviderUrlFromEnv);// üî≠ block explorer URL\nvar blockExplorer=targetNetwork.blockExplorer;// Coinbase walletLink init\nvar walletLink=new WalletLink({appName:\"coinbase\"});// WalletLink provider\nvar walletLinkProvider=walletLink.makeWeb3Provider(\"https://mainnet.infura.io/v3/\".concat(INFURA_ID),1);/*\r\n  Web3 modal helps us \"connect\" external wallets:\r\n*/var web3Modal=new Web3Modal({network:\"mainnet\",// Optional. If using WalletConnect on xDai, change network to \"xdai\" and add RPC info below for xDai chain.\ncacheProvider:true,// optional\ntheme:\"light\",// optional. Change to \"dark\" for a dark theme.\nproviderOptions:{walletconnect:{package:WalletConnectProvider,// required\noptions:{bridge:\"https://polygon.bridge.walletconnect.org\",infuraId:INFURA_ID,rpc:{1:\"https://mainnet.infura.io/v3/\".concat(INFURA_ID),// mainnet // For more WalletConnect providers: https://docs.walletconnect.org/quick-start/dapps/web3-provider#required\n100:\"https://dai.poa.network\"// xDai\n}}},/*torus: {\r\n      package: Torus,\r\n    },*/\"custom-walletlink\":{display:{logo:\"https://play-lh.googleusercontent.com/PjoJoG27miSglVBXoXrxBSLveV6e3EeBPpNY55aiUUBM9Q1RCETKCOqdOkX2ZydqVf0\",name:\"Coinbase\",description:\"Connect to Coinbase Wallet (not Coinbase App)\"},package:walletLinkProvider,connector:function(){var _connector=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(provider,options){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return provider.enable();case 2:return _context.abrupt(\"return\",provider);case 3:case\"end\":return _context.stop();}}},_callee);}));function connector(_x,_x2){return _connector.apply(this,arguments);}return connector;}()}}});function App(){var mainnetProvider=scaffoldEthProvider&&scaffoldEthProvider._network?scaffoldEthProvider:mainnetInfura;var _useState=useState(),_useState2=_slicedToArray(_useState,2),injectedProvider=_useState2[0],setInjectedProvider=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),address=_useState4[0],setAddress=_useState4[1];var logoutOfWeb3Modal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return web3Modal.clearCachedProvider();case 2:if(!(injectedProvider&&injectedProvider.provider&&typeof injectedProvider.provider.disconnect==\"function\")){_context2.next=5;break;}_context2.next=5;return injectedProvider.provider.disconnect();case 5:setTimeout(function(){window.location.reload();},1);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function logoutOfWeb3Modal(){return _ref.apply(this,arguments);};}();/* üíµ This hook will get the price of ETH from ü¶Ñ Uniswap: */var price=useExchangePrice(targetNetwork,mainnetProvider);/* üî• This hook will get the price of Gas from ‚õΩÔ∏è EtherGasStation */var gasPrice=useGasPrice(targetNetwork,\"fast\");// Use your injected provider from ü¶ä Metamask or if you don't have it then instantly generate a üî• burner wallet.\nvar userSigner=useUserSigner(injectedProvider,localProvider);useEffect(function(){function getAddress(){return _getAddress.apply(this,arguments);}function _getAddress(){_getAddress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var newAddress;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!userSigner){_context3.next=5;break;}_context3.next=3;return userSigner.getAddress();case 3:newAddress=_context3.sent;setAddress(newAddress);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _getAddress.apply(this,arguments);}getAddress();},[userSigner]);var _useCurrentDistributi=useCurrentDistribution(serverUrl),_useCurrentDistributi2=_slicedToArray(_useCurrentDistributi,2),currentDistribution=_useCurrentDistributi2[0],setCurrentDistribution=_useCurrentDistributi2[1];var isVoter=address&&currentDistribution&&currentDistribution.members&&currentDistribution.members.includes(address);// You can warn the user if you would like them to be on a specific network\nvar localChainId=localProvider&&localProvider._network&&localProvider._network.chainId;var selectedChainId=userSigner&&userSigner.provider&&userSigner.provider._network&&userSigner.provider._network.chainId;// For more hooks, check out üîóeth-hooks at: https://www.npmjs.com/package/eth-hooks\n// The transactor wraps transactions and provides notificiations\nvar tx=Transactor(userSigner,gasPrice);// Faucet Tx can be used to send funds from the faucet\nvar faucetTx=Transactor(localProvider,gasPrice);// üèó scaffold-eth is full of handy hooks like this one to get your balance:\nvar yourLocalBalance=useBalance(localProvider,address);// Just plug in different üõ∞ providers to get your balance on different chains:\nvar yourMainnetBalance=useBalance(mainnetProvider,address);// Load in your local üìù contract and read a value from it:\nvar readContracts=useContractLoader(localProvider);// If you want to make üîê write transactions to your contracts, use the userSigner:\nvar writeContracts=useContractLoader(userSigner,{chainId:localChainId});var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),adminRole=_useState6[0],setAdminRole=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAdmin=_useState8[0],setIsAdmin=_useState8[1];useEffect(function(){var updateRoleAdmin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var adminRoleFromContract;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(DEBUG)console.log(\"Updating admin role...\");if(!(readContracts&&readContracts.QuadraticDiplomacyContract)){_context4.next=7;break;}_context4.next=4;return readContracts.QuadraticDiplomacyContract.DEFAULT_ADMIN_ROLE();case 4:adminRoleFromContract=_context4.sent;setAdminRole(adminRoleFromContract);if(DEBUG)console.log(\"Admin role updated!\");case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function updateRoleAdmin(){return _ref2.apply(this,arguments);};}();updateRoleAdmin();},[address,readContracts]);useEffect(function(){var updateAdmin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var isAdminFromContract;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(DEBUG)console.log(\"Updating admin...\");if(!(readContracts&&readContracts.QuadraticDiplomacyContract&&adminRole)){_context5.next=7;break;}_context5.next=4;return readContracts.QuadraticDiplomacyContract.hasRole(adminRole,address);case 4:isAdminFromContract=_context5.sent;setIsAdmin(isAdminFromContract);if(DEBUG)console.log(\"Admin updated!\");case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function updateAdmin(){return _ref3.apply(this,arguments);};}();updateAdmin();},[address,readContracts,adminRole]);//\n// üß´ DEBUG üë®üèª‚Äçüî¨\n//\nuseEffect(function(){if(DEBUG&&mainnetProvider&&address&&selectedChainId&&yourLocalBalance&&yourMainnetBalance&&readContracts&&writeContracts){console.log(\"_____________________________________ üèó scaffold-eth _____________________________________\");console.log(\"üåé mainnetProvider\",mainnetProvider);console.log(\"üè† localChainId\",localChainId);console.log(\"üë©‚Äçüíº selected address:\",address);console.log(\"üïµüèª‚Äç‚ôÇÔ∏è selectedChainId:\",selectedChainId);console.log(\"üíµ yourLocalBalance\",yourLocalBalance?ethers.utils.formatEther(yourLocalBalance):\"...\");console.log(\"üíµ yourMainnetBalance\",yourMainnetBalance?ethers.utils.formatEther(yourMainnetBalance):\"...\");console.log(\"üìù readContracts\",readContracts);console.log(\"üîê writeContracts\",writeContracts);}},[mainnetProvider,address,selectedChainId,yourLocalBalance,yourMainnetBalance,readContracts,writeContracts]);var networkDisplay=\"\";if(NETWORKCHECK&&localChainId&&selectedChainId&&localChainId!==selectedChainId){var networkSelected=NETWORK(selectedChainId);var networkLocal=NETWORK(localChainId);if(selectedChainId===1337&&localChainId===31337){networkDisplay=/*#__PURE__*/_jsx(\"div\",{style:{zIndex:2,position:\"absolute\",right:0,top:60,padding:16},children:/*#__PURE__*/_jsx(Alert,{message:\"\\u26A0\\uFE0F Wrong Network ID\",description:/*#__PURE__*/_jsxs(\"div\",{children:[\"You have \",/*#__PURE__*/_jsx(\"b\",{children:\"chain id 1337\"}),\" for localhost and you need to change it to \",/*#__PURE__*/_jsx(\"b\",{children:\"31337\"}),\" to work with HardHat.\",/*#__PURE__*/_jsx(\"div\",{children:\"(MetaMask -> Settings -> Networks -> Chain ID -> 31337)\"})]}),type:\"error\",closable:false})});}else{networkDisplay=/*#__PURE__*/_jsx(\"div\",{style:{zIndex:2,position:\"absolute\",right:0,top:60,padding:16},children:/*#__PURE__*/_jsx(Alert,{message:\"\\u26A0\\uFE0F Wrong Network\",description:/*#__PURE__*/_jsxs(\"div\",{children:[\"You have \",/*#__PURE__*/_jsx(\"b\",{children:networkSelected&&networkSelected.name}),\" selected and you need to be on\",\" \",/*#__PURE__*/_jsx(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var ethereum,data,switchTx;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:ethereum=window.ethereum;data=[{chainId:\"0x\"+targetNetwork.chainId.toString(16),chainName:targetNetwork.name,nativeCurrency:targetNetwork.nativeCurrency,rpcUrls:[targetNetwork.rpcUrl],blockExplorerUrls:[targetNetwork.blockExplorer]}];console.log(\"data\",data);_context6.prev=3;_context6.next=6;return ethereum.request({method:\"wallet_switchEthereumChain\",params:[{chainId:data[0].chainId}]});case 6:switchTx=_context6.sent;_context6.next=19;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](3);_context6.prev=11;_context6.next=14;return ethereum.request({method:\"wallet_addEthereumChain\",params:data});case 14:switchTx=_context6.sent;_context6.next=19;break;case 17:_context6.prev=17;_context6.t1=_context6[\"catch\"](11);case 19:if(switchTx){console.log(switchTx);}case 20:case\"end\":return _context6.stop();}}},_callee6,null,[[3,9],[11,17]]);})),children:/*#__PURE__*/_jsx(\"b\",{children:networkLocal&&networkLocal.name})}),\".\"]}),type:\"error\",closable:false})});}}else{networkDisplay=/*#__PURE__*/_jsx(\"div\",{style:{zIndex:-1,position:\"absolute\",right:154,top:28,padding:16,color:targetNetwork.color},children:targetNetwork.name});}var loadWeb3Modal=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var provider;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return web3Modal.connect();case 2:provider=_context7.sent;setInjectedProvider(new ethers.providers.Web3Provider(provider));provider.on(\"chainChanged\",function(chainId){console.log(\"chain changed to \".concat(chainId,\"! updating providers\"));setInjectedProvider(new ethers.providers.Web3Provider(provider));});provider.on(\"accountsChanged\",function(){console.log(\"account changed!\");setInjectedProvider(new ethers.providers.Web3Provider(provider));});// Subscribe to session disconnection\nprovider.on(\"disconnect\",function(code,reason){console.log(code,reason);logoutOfWeb3Modal();});case 7:case\"end\":return _context7.stop();}}},_callee7);})),[setInjectedProvider]);useEffect(function(){if(web3Modal.cachedProvider){loadWeb3Modal();}},[loadWeb3Modal]);var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),route=_useState10[0],setRoute=_useState10[1];useEffect(function(){setRoute(window.location.pathname);},[setRoute]);var faucetHint=\"\";var faucetAvailable=localProvider&&localProvider.connection&&targetNetwork.name.indexOf(\"local\")!==-1;var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),faucetClicked=_useState12[0],setFaucetClicked=_useState12[1];if(!faucetClicked&&localProvider&&localProvider._network&&localProvider._network.chainId===31337&&yourLocalBalance&&ethers.utils.formatEther(yourLocalBalance)<=0){faucetHint=/*#__PURE__*/_jsx(\"div\",{style:{padding:16},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){faucetTx({to:address,value:ethers.utils.parseEther(\"0.01\")});setFaucetClicked(true);},children:\"\\uD83D\\uDCB0 Grab funds from the faucet \\u26FD\\uFE0F\"})});}function pageContentForAdmin(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Menu,{style:{textAlign:\"center\"},selectedKeys:[route],mode:\"horizontal\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){setRoute(\"/\");},to:\"/\",children:\"Create\"})},\"/\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){setRoute(\"/quadratic-diplomacy-vote\");},to:\"/quadratic-diplomacy-vote\",children:\"Vote\"})},\"/quadratic-diplomacy-vote\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){setRoute(\"/quadratic-diplomacy-reward\");},to:\"/quadratic-diplomacy-reward\",children:\"Reward\"})},\"/quadratic-diplomacy-reward\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(Link,{onClick:function onClick(){setRoute(\"/contract\");},to:\"/contract\",children:\"Contract\"})},\"/contract\")]}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(QuadraticDiplomacyCreate,{mainnetProvider:mainnetProvider,serverUrl:serverUrl,address:address,userSigner:userSigner,currentDistribution:currentDistribution,setCurrentDistribution:setCurrentDistribution,isAdmin:isAdmin})}),/*#__PURE__*/_jsx(Route,{path:\"/quadratic-diplomacy-vote\",children:/*#__PURE__*/_jsx(QuadraticDiplomacyVote,{isVoter:isVoter,mainnetProvider:mainnetProvider,currentDistribution:currentDistribution,address:address,userSigner:userSigner,serverUrl:serverUrl})}),/*#__PURE__*/_jsx(Route,{path:\"/quadratic-diplomacy-reward\",children:/*#__PURE__*/_jsx(QuadraticDiplomacyReward,{tx:tx,writeContracts:writeContracts,userSigner:userSigner,price:price,isAdmin:isAdmin,mainnetProvider:mainnetProvider,currentDistribution:currentDistribution,serverUrl:serverUrl,address:address})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/contract\",children:/*#__PURE__*/_jsx(Contract,{name:\"QuadraticDiplomacyContract\",signer:userSigner,provider:localProvider,address:address,blockExplorer:blockExplorer})})]})]});}function pageContentForVoter(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(QuadraticDiplomacyVote,{isVoter:isVoter,mainnetProvider:mainnetProvider,currentDistribution:currentDistribution,address:address,userSigner:userSigner,serverUrl:serverUrl})});}function pageContentForOthers(){if(currentDistribution.id){return/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid #cccccc\",padding:16,width:800,margin:\"auto\",marginTop:64},children:/*#__PURE__*/_jsx(Title,{level:4,children:\"Voting in progress\"})});}else{return/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid #cccccc\",padding:16,width:800,margin:\"auto\",marginTop:64},children:/*#__PURE__*/_jsx(Title,{level:4,children:\"No voting in progress\"})});}}function pageContent(){if(currentDistribution==null||isAdmin==null){return/*#__PURE__*/_jsx(Spin,{});}if(isAdmin){return pageContentForAdmin();}if(currentDistribution&&isVoter){return pageContentForVoter();}return pageContentForOthers();}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),networkDisplay,/*#__PURE__*/_jsx(BrowserRouter,{children:pageContent()}),/*#__PURE__*/_jsx(ThemeSwitch,{}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"fixed\",textAlign:\"right\",right:0,top:0,padding:10},children:[/*#__PURE__*/_jsx(Account,{address:address,localProvider:localProvider,userSigner:userSigner,mainnetProvider:mainnetProvider,price:price,web3Modal:web3Modal,loadWeb3Modal:loadWeb3Modal,logoutOfWeb3Modal:logoutOfWeb3Modal,blockExplorer:blockExplorer,isAdmin:isAdmin,isVoter:isVoter}),faucetHint]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"fixed\",textAlign:\"left\",left:0,bottom:20,padding:10},children:[/*#__PURE__*/_jsxs(Row,{align:\"middle\",gutter:[4,4],children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(Ramp,{price:price,address:address,networks:NETWORKS})}),/*#__PURE__*/_jsx(Col,{span:8,style:{textAlign:\"center\",opacity:0.8},children:/*#__PURE__*/_jsx(GasGauge,{gasPrice:gasPrice})}),/*#__PURE__*/_jsx(Col,{span:8,style:{textAlign:\"center\",opacity:1},children:/*#__PURE__*/_jsxs(Button,{onClick:function onClick(){window.open(\"https://t.me/joinchat/KByvmRe5wkR-8F_zz6AjpA\");},size:\"large\",shape:\"round\",children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8},role:\"img\",\"aria-label\":\"support\",children:\"\\uD83D\\uDCAC\"}),\"Support\"]})})]}),/*#__PURE__*/_jsx(Row,{align:\"middle\",gutter:[4,4],children:/*#__PURE__*/_jsx(Col,{span:24,children:/*  if the local provider has a signer, let's show the faucet:  */faucetAvailable?/*#__PURE__*/_jsx(Faucet,{localProvider:localProvider,price:price,ensProvider:mainnetProvider}):\"\"})})]})]});}export default App;","map":{"version":3,"sources":["C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/packages/react-app/src/App.jsx"],"names":["WalletConnectProvider","WalletLink","Alert","Button","Col","Menu","Row","Spin","Typography","React","useCallback","useEffect","useState","BrowserRouter","Link","Route","Switch","Web3Modal","Account","Contract","Faucet","GasGauge","Header","Ramp","ThemeSwitch","INFURA_ID","NETWORK","NETWORKS","Transactor","useBalance","useContractLoader","useContractReader","useEventListener","useExchangePrice","useGasPrice","useUserSigner","useCurrentDistribution","QuadraticDiplomacyVote","QuadraticDiplomacyReward","QuadraticDiplomacyCreate","require","ethers","Title","targetNetwork","ropsten","serverUrl","DEBUG","NETWORKCHECK","console","log","scaffoldEthProvider","navigator","onLine","providers","StaticJsonRpcProvider","mainnetInfura","localProviderUrl","rpcUrl","localProviderUrlFromEnv","process","env","REACT_APP_PROVIDER","localProvider","blockExplorer","walletLink","appName","walletLinkProvider","makeWeb3Provider","web3Modal","network","cacheProvider","theme","providerOptions","walletconnect","package","options","bridge","infuraId","rpc","display","logo","name","description","connector","provider","enable","App","mainnetProvider","_network","injectedProvider","setInjectedProvider","address","setAddress","logoutOfWeb3Modal","clearCachedProvider","disconnect","setTimeout","window","location","reload","price","gasPrice","userSigner","getAddress","newAddress","currentDistribution","setCurrentDistribution","isVoter","members","includes","localChainId","chainId","selectedChainId","tx","faucetTx","yourLocalBalance","yourMainnetBalance","readContracts","writeContracts","adminRole","setAdminRole","isAdmin","setIsAdmin","updateRoleAdmin","QuadraticDiplomacyContract","DEFAULT_ADMIN_ROLE","adminRoleFromContract","updateAdmin","hasRole","isAdminFromContract","utils","formatEther","networkDisplay","networkSelected","networkLocal","zIndex","position","right","top","padding","ethereum","data","toString","chainName","nativeCurrency","rpcUrls","blockExplorerUrls","request","method","params","switchTx","color","loadWeb3Modal","connect","Web3Provider","on","code","reason","cachedProvider","route","setRoute","pathname","faucetHint","faucetAvailable","connection","indexOf","faucetClicked","setFaucetClicked","to","value","parseEther","pageContentForAdmin","textAlign","pageContentForVoter","pageContentForOthers","id","border","width","margin","marginTop","pageContent","left","bottom","opacity","open","marginRight"],"mappings":"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","sourcesContent":["import WalletConnectProvider from \"@walletconnect/web3-provider\";\r\nimport WalletLink from \"walletlink\";\r\nimport { Alert, Button, Col, Menu, Row, Spin, Typography } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { BrowserRouter, Link, Route, Switch } from \"react-router-dom\";\r\nimport Web3Modal from \"web3modal\";\r\nimport \"./App.css\";\r\nimport { Account, Contract, Faucet, GasGauge, Header, Ramp, ThemeSwitch } from \"./components\";\r\nimport { INFURA_ID, NETWORK, NETWORKS } from \"./constants\";\r\nimport { Transactor } from \"./helpers\";\r\nimport {\r\n  useBalance,\r\n  useContractLoader,\r\n  useContractReader,\r\n  useEventListener,\r\n  useExchangePrice,\r\n  useGasPrice,\r\n  useUserSigner,\r\n  useCurrentDistribution,\r\n} from \"./hooks\";\r\nimport QuadraticDiplomacyVote from \"./views/QuadraticDiplomacyVote\";\r\nimport QuadraticDiplomacyReward from \"./views/QuadraticDiplomacyReward\";\r\nimport QuadraticDiplomacyCreate from \"./views/QuadraticDiplomacyCreate\";\r\n\r\nconst { ethers } = require(\"ethers\");\r\nconst { Title } = Typography;\r\n/*\r\n    Welcome to üèó scaffold-eth !\r\n\r\n    Code:\r\n    https://github.com/austintgriffith/scaffold-eth\r\n\r\n    Support:\r\n    https://t.me/joinchat/KByvmRe5wkR-8F_zz6AjpA\r\n    or DM @austingriffith on twitter or telegram\r\n\r\n    You should get your own Infura.io ID and put it in `constants.js`\r\n    (this is your connection to the main Ethereum network for ENS etc.)\r\n\r\n\r\n    üåè EXTERNAL CONTRACTS:\r\n    You can also bring in contract artifacts in `constants.js`\r\n    (and then use the `useExternalContractLoader()` hook!)\r\n*/\r\n\r\n/// üì° What chain are your contracts deployed to?\r\nconst targetNetwork =  NETWORKS.ropsten;\r\n\r\nconst serverUrl = \"http://localhost:45622/\";\r\n\r\n// üò¨ Sorry for all the console logging\r\nconst DEBUG = true;\r\nconst NETWORKCHECK = true;\r\n\r\n// üõ∞ providers\r\nif (DEBUG) console.log(\"üì° Connecting to Mainnet Ethereum\");\r\n// const mainnetProvider = getDefaultProvider(\"mainnet\", { infura: INFURA_ID, etherscan: ETHERSCAN_KEY, quorum: 1 });\r\n// const mainnetProvider = new InfuraProvider(\"mainnet\",INFURA_ID);\r\n//\r\n// attempt to connect to our own scaffold eth rpc and if that fails fall back to infura...\r\n// Using StaticJsonRpcProvider as the chainId won't change see https://github.com/ethers-io/ethers.js/issues/901\r\nconst scaffoldEthProvider = navigator.onLine\r\n  ? new ethers.providers.StaticJsonRpcProvider(\"https://rpc.scaffoldeth.io:48544\")\r\n  : null;\r\nconst mainnetInfura = navigator.onLine\r\n  ? new ethers.providers.StaticJsonRpcProvider(\"https://mainnet.infura.io/v3/\" + INFURA_ID)\r\n  : null;\r\n// ( ‚ö†Ô∏è Getting \"failed to meet quorum\" errors? Check your INFURA_I )\r\n\r\n// üè† Your local provider is usually pointed at your local blockchain\r\nconst localProviderUrl = targetNetwork.rpcUrl;\r\n// as you deploy to other networks you can set REACT_APP_PROVIDER=https://dai.poa.network in packages/react-app/.env\r\nconst localProviderUrlFromEnv = process.env.REACT_APP_PROVIDER ? process.env.REACT_APP_PROVIDER : localProviderUrl;\r\nif (DEBUG) console.log(\"üè† Connecting to provider:\", localProviderUrlFromEnv);\r\nconst localProvider = new ethers.providers.StaticJsonRpcProvider(localProviderUrlFromEnv);\r\n\r\n// üî≠ block explorer URL\r\nconst blockExplorer = targetNetwork.blockExplorer;\r\n\r\n// Coinbase walletLink init\r\nconst walletLink = new WalletLink({\r\n  appName: \"coinbase\",\r\n});\r\n\r\n// WalletLink provider\r\nconst walletLinkProvider = walletLink.makeWeb3Provider(`https://mainnet.infura.io/v3/${INFURA_ID}`, 1);\r\n\r\n/*\r\n  Web3 modal helps us \"connect\" external wallets:\r\n*/\r\nconst web3Modal = new Web3Modal({\r\n  network: \"mainnet\", // Optional. If using WalletConnect on xDai, change network to \"xdai\" and add RPC info below for xDai chain.\r\n  cacheProvider: true, // optional\r\n  theme: \"light\", // optional. Change to \"dark\" for a dark theme.\r\n  providerOptions: {\r\n    walletconnect: {\r\n      package: WalletConnectProvider, // required\r\n      options: {\r\n        bridge: \"https://polygon.bridge.walletconnect.org\",\r\n        infuraId: INFURA_ID,\r\n        rpc: {\r\n          1: `https://mainnet.infura.io/v3/${INFURA_ID}`, // mainnet // For more WalletConnect providers: https://docs.walletconnect.org/quick-start/dapps/web3-provider#required\r\n          100: \"https://dai.poa.network\", // xDai\r\n        },\r\n      },\r\n    },\r\n    /*torus: {\r\n      package: Torus,\r\n    },*/\r\n    \"custom-walletlink\": {\r\n      display: {\r\n        logo: \"https://play-lh.googleusercontent.com/PjoJoG27miSglVBXoXrxBSLveV6e3EeBPpNY55aiUUBM9Q1RCETKCOqdOkX2ZydqVf0\",\r\n        name: \"Coinbase\",\r\n        description: \"Connect to Coinbase Wallet (not Coinbase App)\",\r\n      },\r\n      package: walletLinkProvider,\r\n      connector: async (provider, options) => {\r\n        await provider.enable();\r\n        return provider;\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction App() {\r\n  const mainnetProvider = scaffoldEthProvider && scaffoldEthProvider._network ? scaffoldEthProvider : mainnetInfura;\r\n\r\n  const [injectedProvider, setInjectedProvider] = useState();\r\n  const [address, setAddress] = useState();\r\n\r\n  const logoutOfWeb3Modal = async () => {\r\n    await web3Modal.clearCachedProvider();\r\n    if (injectedProvider && injectedProvider.provider && typeof injectedProvider.provider.disconnect == \"function\") {\r\n      await injectedProvider.provider.disconnect();\r\n    }\r\n    setTimeout(() => {\r\n      window.location.reload();\r\n    }, 1);\r\n  };\r\n\r\n  /* üíµ This hook will get the price of ETH from ü¶Ñ Uniswap: */\r\n  const price = useExchangePrice(targetNetwork, mainnetProvider);\r\n\r\n  /* üî• This hook will get the price of Gas from ‚õΩÔ∏è EtherGasStation */\r\n  const gasPrice = useGasPrice(targetNetwork, \"fast\");\r\n  // Use your injected provider from ü¶ä Metamask or if you don't have it then instantly generate a üî• burner wallet.\r\n  const userSigner = useUserSigner(injectedProvider, localProvider);\r\n\r\n  useEffect(() => {\r\n    async function getAddress() {\r\n      if (userSigner) {\r\n        const newAddress = await userSigner.getAddress();\r\n        setAddress(newAddress);\r\n      }\r\n    }\r\n    getAddress();\r\n  }, [userSigner]);\r\n\r\n  const [currentDistribution, setCurrentDistribution] = useCurrentDistribution(serverUrl);\r\n  const isVoter = address && currentDistribution && currentDistribution.members && currentDistribution.members.includes(address);\r\n\r\n  // You can warn the user if you would like them to be on a specific network\r\n  const localChainId = localProvider && localProvider._network && localProvider._network.chainId;\r\n  const selectedChainId =\r\n    userSigner && userSigner.provider && userSigner.provider._network && userSigner.provider._network.chainId;\r\n\r\n  // For more hooks, check out üîóeth-hooks at: https://www.npmjs.com/package/eth-hooks\r\n\r\n  // The transactor wraps transactions and provides notificiations\r\n  const tx = Transactor(userSigner, gasPrice);\r\n\r\n  // Faucet Tx can be used to send funds from the faucet\r\n  const faucetTx = Transactor(localProvider, gasPrice);\r\n\r\n  // üèó scaffold-eth is full of handy hooks like this one to get your balance:\r\n  const yourLocalBalance = useBalance(localProvider, address);\r\n\r\n  // Just plug in different üõ∞ providers to get your balance on different chains:\r\n  const yourMainnetBalance = useBalance(mainnetProvider, address);\r\n\r\n  // Load in your local üìù contract and read a value from it:\r\n  const readContracts = useContractLoader(localProvider);\r\n\r\n  // If you want to make üîê write transactions to your contracts, use the userSigner:\r\n  const writeContracts = useContractLoader(userSigner, { chainId: localChainId });\r\n\r\n  const [adminRole, setAdminRole] = useState();\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const updateRoleAdmin = async () => {\r\n      if (DEBUG) console.log(\"Updating admin role...\");\r\n      if (readContracts && readContracts.QuadraticDiplomacyContract) {\r\n        const adminRoleFromContract = await readContracts.QuadraticDiplomacyContract.DEFAULT_ADMIN_ROLE();\r\n        setAdminRole(adminRoleFromContract);\r\n        if (DEBUG) console.log(\"Admin role updated!\");\r\n      }\r\n    };\r\n    updateRoleAdmin();\r\n  }, [address, readContracts]);\r\n\r\n  useEffect(() => {\r\n    const updateAdmin = async () => {\r\n      if (DEBUG) console.log(\"Updating admin...\");\r\n      if (readContracts && readContracts.QuadraticDiplomacyContract && adminRole) {\r\n        const isAdminFromContract = await readContracts.QuadraticDiplomacyContract.hasRole(adminRole, address);\r\n        setIsAdmin(isAdminFromContract);\r\n        if (DEBUG) console.log(\"Admin updated!\");\r\n      }\r\n    };\r\n    updateAdmin();\r\n  }, [address, readContracts, adminRole]);\r\n\r\n  //\r\n  // üß´ DEBUG üë®üèª‚Äçüî¨\r\n  //\r\n  useEffect(() => {\r\n    if (\r\n      DEBUG &&\r\n      mainnetProvider &&\r\n      address &&\r\n      selectedChainId &&\r\n      yourLocalBalance &&\r\n      yourMainnetBalance &&\r\n      readContracts &&\r\n      writeContracts\r\n    ) {\r\n      console.log(\"_____________________________________ üèó scaffold-eth _____________________________________\");\r\n      console.log(\"üåé mainnetProvider\", mainnetProvider);\r\n      console.log(\"üè† localChainId\", localChainId);\r\n      console.log(\"üë©‚Äçüíº selected address:\", address);\r\n      console.log(\"üïµüèª‚Äç‚ôÇÔ∏è selectedChainId:\", selectedChainId);\r\n      console.log(\"üíµ yourLocalBalance\", yourLocalBalance ? ethers.utils.formatEther(yourLocalBalance) : \"...\");\r\n      console.log(\"üíµ yourMainnetBalance\", yourMainnetBalance ? ethers.utils.formatEther(yourMainnetBalance) : \"...\");\r\n      console.log(\"üìù readContracts\", readContracts);\r\n      console.log(\"üîê writeContracts\", writeContracts);\r\n    }\r\n  }, [mainnetProvider, address, selectedChainId, yourLocalBalance, yourMainnetBalance, readContracts, writeContracts]);\r\n\r\n  let networkDisplay = \"\";\r\n  if (NETWORKCHECK && localChainId && selectedChainId && localChainId !== selectedChainId) {\r\n    const networkSelected = NETWORK(selectedChainId);\r\n    const networkLocal = NETWORK(localChainId);\r\n    if (selectedChainId === 1337 && localChainId === 31337) {\r\n      networkDisplay = (\r\n        <div style={{ zIndex: 2, position: \"absolute\", right: 0, top: 60, padding: 16 }}>\r\n          <Alert\r\n            message=\"‚ö†Ô∏è Wrong Network ID\"\r\n            description={\r\n              <div>\r\n                You have <b>chain id 1337</b> for localhost and you need to change it to <b>31337</b> to work with\r\n                HardHat.\r\n                <div>(MetaMask -&gt; Settings -&gt; Networks -&gt; Chain ID -&gt; 31337)</div>\r\n              </div>\r\n            }\r\n            type=\"error\"\r\n            closable={false}\r\n          />\r\n        </div>\r\n      );\r\n    } else {\r\n      networkDisplay = (\r\n        <div style={{ zIndex: 2, position: \"absolute\", right: 0, top: 60, padding: 16 }}>\r\n          <Alert\r\n            message=\"‚ö†Ô∏è Wrong Network\"\r\n            description={\r\n              <div>\r\n                You have <b>{networkSelected && networkSelected.name}</b> selected and you need to be on{\" \"}\r\n                <Button\r\n                  onClick={async () => {\r\n                    const ethereum = window.ethereum;\r\n                    const data = [\r\n                      {\r\n                        chainId: \"0x\" + targetNetwork.chainId.toString(16),\r\n                        chainName: targetNetwork.name,\r\n                        nativeCurrency: targetNetwork.nativeCurrency,\r\n                        rpcUrls: [targetNetwork.rpcUrl],\r\n                        blockExplorerUrls: [targetNetwork.blockExplorer],\r\n                      },\r\n                    ];\r\n                    console.log(\"data\", data);\r\n                    let switchTx;\r\n                    // https://docs.metamask.io/guide/rpc-api.html#other-rpc-methods\r\n                    try {\r\n                      switchTx = await ethereum.request({\r\n                        method: \"wallet_switchEthereumChain\",\r\n                        params: [{ chainId: data[0].chainId }],\r\n                      });\r\n                    } catch (switchError) {\r\n                      // not checking specific error code, because maybe we're not using MetaMask\r\n                      try {\r\n                        switchTx = await ethereum.request({\r\n                          method: \"wallet_addEthereumChain\",\r\n                          params: data,\r\n                        });\r\n                      } catch (addError) {\r\n                        // handle \"add\" error\r\n                      }\r\n                    }\r\n\r\n                    if (switchTx) {\r\n                      console.log(switchTx);\r\n                    }\r\n                  }}\r\n                >\r\n                  <b>{networkLocal && networkLocal.name}</b>\r\n                </Button>\r\n                .\r\n              </div>\r\n            }\r\n            type=\"error\"\r\n            closable={false}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n  } else {\r\n    networkDisplay = (\r\n      <div style={{ zIndex: -1, position: \"absolute\", right: 154, top: 28, padding: 16, color: targetNetwork.color }}>\r\n        {targetNetwork.name}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const loadWeb3Modal = useCallback(async () => {\r\n    const provider = await web3Modal.connect();\r\n    setInjectedProvider(new ethers.providers.Web3Provider(provider));\r\n\r\n    provider.on(\"chainChanged\", chainId => {\r\n      console.log(`chain changed to ${chainId}! updating providers`);\r\n      setInjectedProvider(new ethers.providers.Web3Provider(provider));\r\n    });\r\n\r\n    provider.on(\"accountsChanged\", () => {\r\n      console.log(`account changed!`);\r\n      setInjectedProvider(new ethers.providers.Web3Provider(provider));\r\n    });\r\n\r\n    // Subscribe to session disconnection\r\n    provider.on(\"disconnect\", (code, reason) => {\r\n      console.log(code, reason);\r\n      logoutOfWeb3Modal();\r\n    });\r\n  }, [setInjectedProvider]);\r\n\r\n  useEffect(() => {\r\n    if (web3Modal.cachedProvider) {\r\n      loadWeb3Modal();\r\n    }\r\n  }, [loadWeb3Modal]);\r\n\r\n  const [route, setRoute] = useState();\r\n  useEffect(() => {\r\n    setRoute(window.location.pathname);\r\n  }, [setRoute]);\r\n\r\n  let faucetHint = \"\";\r\n  const faucetAvailable = localProvider && localProvider.connection && targetNetwork.name.indexOf(\"local\") !== -1;\r\n\r\n  const [faucetClicked, setFaucetClicked] = useState(false);\r\n  if (\r\n    !faucetClicked &&\r\n    localProvider &&\r\n    localProvider._network &&\r\n    localProvider._network.chainId === 31337 &&\r\n    yourLocalBalance &&\r\n    ethers.utils.formatEther(yourLocalBalance) <= 0\r\n  ) {\r\n    faucetHint = (\r\n      <div style={{ padding: 16 }}>\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => {\r\n            faucetTx({\r\n              to: address,\r\n              value: ethers.utils.parseEther(\"0.01\"),\r\n            });\r\n            setFaucetClicked(true);\r\n          }}\r\n        >\r\n          üí∞ Grab funds from the faucet ‚õΩÔ∏è\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function pageContentForAdmin() {\r\n    return (\r\n      <div>\r\n        <Menu style={{ textAlign: \"center\" }} selectedKeys={[route]} mode=\"horizontal\">\r\n          <Menu.Item key=\"/\">\r\n            <Link\r\n              onClick={() => {\r\n                setRoute(\"/\");\r\n              }}\r\n              to=\"/\"\r\n            >\r\n              Create\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/quadratic-diplomacy-vote\">\r\n            <Link\r\n              onClick={() => {\r\n                setRoute(\"/quadratic-diplomacy-vote\");\r\n              }}\r\n              to=\"/quadratic-diplomacy-vote\"\r\n            >\r\n              Vote\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/quadratic-diplomacy-reward\">\r\n            <Link\r\n              onClick={() => {\r\n                setRoute(\"/quadratic-diplomacy-reward\");\r\n              }}\r\n              to=\"/quadratic-diplomacy-reward\"\r\n            >\r\n              Reward\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/contract\">\r\n            <Link\r\n              onClick={() => {\r\n                setRoute(\"/contract\");\r\n              }}\r\n              to=\"/contract\"\r\n            >\r\n              Contract\r\n            </Link>\r\n          </Menu.Item>\r\n        </Menu>\r\n\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <QuadraticDiplomacyCreate\r\n              mainnetProvider={mainnetProvider}\r\n              serverUrl={serverUrl}\r\n              address={address}\r\n              userSigner={userSigner}\r\n              currentDistribution={currentDistribution}\r\n              setCurrentDistribution={setCurrentDistribution}\r\n              isAdmin={isAdmin}\r\n            />\r\n          </Route>\r\n          <Route path=\"/quadratic-diplomacy-vote\">\r\n            <QuadraticDiplomacyVote\r\n              isVoter={isVoter}\r\n              mainnetProvider={mainnetProvider}\r\n              currentDistribution={currentDistribution}\r\n              address={address}\r\n              userSigner={userSigner}\r\n              serverUrl={serverUrl}\r\n            />\r\n          </Route>\r\n          <Route path=\"/quadratic-diplomacy-reward\">\r\n            <QuadraticDiplomacyReward\r\n              tx={tx}\r\n              writeContracts={writeContracts}\r\n              userSigner={userSigner}\r\n              price={price}\r\n              isAdmin={isAdmin}\r\n              mainnetProvider={mainnetProvider}\r\n              currentDistribution={currentDistribution}\r\n              serverUrl={serverUrl}\r\n              address={address}\r\n            />\r\n          </Route>\r\n          <Route exact path=\"/contract\">\r\n            <Contract\r\n              name=\"QuadraticDiplomacyContract\"\r\n              signer={userSigner}\r\n              provider={localProvider}\r\n              address={address}\r\n              blockExplorer={blockExplorer}\r\n            />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function pageContentForVoter() {\r\n    return (\r\n      <div>\r\n        <QuadraticDiplomacyVote\r\n          isVoter={isVoter}\r\n          mainnetProvider={mainnetProvider}\r\n          currentDistribution={currentDistribution}\r\n          address={address}\r\n          userSigner={userSigner}\r\n          serverUrl={serverUrl}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function pageContentForOthers() {\r\n    if (currentDistribution.id) {\r\n      return (\r\n        <div style={{ border: \"1px solid #cccccc\", padding: 16, width: 800, margin: \"auto\", marginTop: 64 }}>\r\n          <Title level={4}>Voting in progress</Title>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div style={{ border: \"1px solid #cccccc\", padding: 16, width: 800, margin: \"auto\", marginTop: 64 }}>\r\n          <Title level={4}>No voting in progress</Title>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  function pageContent() {\r\n    if (currentDistribution == null || isAdmin == null) {\r\n      return <Spin />;\r\n    }\r\n    if (isAdmin) {\r\n      return pageContentForAdmin();\r\n    }\r\n    if (currentDistribution && isVoter) {\r\n      return pageContentForVoter();\r\n    }\r\n    return pageContentForOthers();\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {/* ‚úèÔ∏è Edit the header and change the title to your project name */}\r\n      <Header />\r\n      {networkDisplay}\r\n      <BrowserRouter>{pageContent()}</BrowserRouter>\r\n\r\n      <ThemeSwitch />\r\n\r\n      {/* üë®‚Äçüíº Your account is in the top right with a wallet at connect options */}\r\n      <div style={{ position: \"fixed\", textAlign: \"right\", right: 0, top: 0, padding: 10 }}>\r\n        <Account\r\n          address={address}\r\n          localProvider={localProvider}\r\n          userSigner={userSigner}\r\n          mainnetProvider={mainnetProvider}\r\n          price={price}\r\n          web3Modal={web3Modal}\r\n          loadWeb3Modal={loadWeb3Modal}\r\n          logoutOfWeb3Modal={logoutOfWeb3Modal}\r\n          blockExplorer={blockExplorer}\r\n          isAdmin={isAdmin}\r\n          isVoter={isVoter}\r\n        />\r\n        {faucetHint}\r\n      </div>\r\n\r\n      {/* üó∫ Extra UI like gas price, eth price, faucet, and support: */}\r\n      <div style={{ position: \"fixed\", textAlign: \"left\", left: 0, bottom: 20, padding: 10 }}>\r\n        <Row align=\"middle\" gutter={[4, 4]}>\r\n          <Col span={8}>\r\n            <Ramp price={price} address={address} networks={NETWORKS} />\r\n          </Col>\r\n\r\n          <Col span={8} style={{ textAlign: \"center\", opacity: 0.8 }}>\r\n            <GasGauge gasPrice={gasPrice} />\r\n          </Col>\r\n          <Col span={8} style={{ textAlign: \"center\", opacity: 1 }}>\r\n            <Button\r\n              onClick={() => {\r\n                window.open(\"https://t.me/joinchat/KByvmRe5wkR-8F_zz6AjpA\");\r\n              }}\r\n              size=\"large\"\r\n              shape=\"round\"\r\n            >\r\n              <span style={{ marginRight: 8 }} role=\"img\" aria-label=\"support\">\r\n                üí¨\r\n              </span>\r\n              Support\r\n            </Button>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row align=\"middle\" gutter={[4, 4]}>\r\n          <Col span={24}>\r\n            {\r\n              /*  if the local provider has a signer, let's show the faucet:  */\r\n              faucetAvailable ? (\r\n                <Faucet localProvider={localProvider} price={price} ensProvider={mainnetProvider} />\r\n              ) : (\r\n                \"\"\r\n              )\r\n            }\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}