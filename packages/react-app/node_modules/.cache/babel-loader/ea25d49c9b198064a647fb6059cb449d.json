{"ast":null,"code":"import _objectSpread from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{utils,ethers}from\"ethers\";import{Button,Input,Form,Select,InputNumber,Table,Radio}from\"antd\";import React,{useState,useEffect}from\"react\";import{useContractLoader,useOnBlock}from\"../hooks\";import{NETWORKS}from\"../constants\";import{Transactor}from\"../helpers\";/*\r\nThis is a component for bridging between L1 & L2\r\nCurrently it supports Testnet deposits for Arbitrum & Optimism\r\n\r\n __          _______ _____\r\n \\ \\        / /_   _|  __ \\\r\n  \\ \\  /\\  / /  | | | |__) |\r\n   \\ \\/  \\/ /   | | |  ___/\r\n    \\  /\\  /   _| |_| |\r\n     \\/  \\/   |_____|_|\r\n\r\n\r\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function L2ArbitrumBridge(_ref){var address=_ref.address,userSigner=_ref.userSigner;var _useState=useState(\"...\"),_useState2=_slicedToArray(_useState,2),L1EthBalance=_useState2[0],setL1EthBalance=_useState2[1];var _useState3=useState(\"...\"),_useState4=_slicedToArray(_useState3,2),L2EthBalance=_useState4[0],setL2EthBalance=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),L1Provider=_useState6[0],setL1Provider=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),L2Provider=_useState8[0],setL2Provider=_useState8[1];var _useState9=useState(\"arbitrum\"),_useState10=_slicedToArray(_useState9,2),rollup=_useState10[0],setRollup=_useState10[1];var _useState11=useState(\"test\"),_useState12=_slicedToArray(_useState11,2),environment=_useState12[0],setEnvironment=_useState12[1];var rollupConfig={arbitrum:{test:{L1:NETWORKS.rinkeby,L2:NETWORKS.rinkebyArbitrum},main:{L1:NETWORKS.mainnet,L2:NETWORKS.arbitrum},local:{L1:NETWORKS.localArbitrumL1,L2:NETWORKS.localArbitrum}},optimism:{test:{L1:NETWORKS.kovan,L2:NETWORKS.kovanOptimism},local:{L1:NETWORKS.localOptimismL1,L2:NETWORKS.localOptimism}}};var activeConfig=rollupConfig[rollup][environment];var selectedChainId=userSigner&&userSigner.provider&&userSigner.provider._network&&userSigner.provider._network.chainId;var tx=Transactor(userSigner);useEffect(function(){function setProviders(){return _setProviders.apply(this,arguments);}function _setProviders(){_setProviders=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var L1,L2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:L1=activeConfig.L1;L2=activeConfig.L2;setL1Provider(new ethers.providers.StaticJsonRpcProvider(L1.rpcUrl));setL2Provider(new ethers.providers.StaticJsonRpcProvider(L2.rpcUrl));setL1EthBalance(\"...\");setL2EthBalance(\"...\");case 6:case\"end\":return _context.stop();}}},_callee);}));return _setProviders.apply(this,arguments);}setProviders();},[rollup]);var contracts=useContractLoader(userSigner,{externalContracts:L1BridgeMetadata,hardhatContracts:{}});useOnBlock(L1Provider,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var yourL1Balance,yourL2Balance;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"\\u26D3 A new mainnet block is here: \".concat(L1Provider._lastBlockNumber));_context2.next=3;return L1Provider.getBalance(address);case 3:yourL1Balance=_context2.sent;setL1EthBalance(yourL1Balance?ethers.utils.formatEther(yourL1Balance):\"...\");_context2.next=7;return L2Provider.getBalance(address);case 7:yourL2Balance=_context2.sent;setL2EthBalance(yourL2Balance?ethers.utils.formatEther(yourL2Balance):\"...\");case 9:case\"end\":return _context2.stop();}}},_callee2);})));var Option=Select.Option;var formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:12}}};var tailFormItemLayout={wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:8}}};var columns=[{title:\"\",dataIndex:\"token\",key:\"token\",align:\"center\"},{title:\"\".concat(activeConfig.L1.name,\" L1 Balance\"),dataIndex:\"l1\",key:\"l1\",align:\"center\"},{title:\"\".concat(activeConfig.L1.name,\" \").concat(rollup,\" Balance\"),dataIndex:\"l2\",key:\"l2\",align:\"center\"}];var data=[{key:\"1\",token:\"ETH\",l1:\"Ξ\"+L1EthBalance,l2:\"Ξ\"+L2EthBalance}];var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var onAssetChange=function onAssetChange(value){console.log(value);};function onFinish(_x){return _onFinish.apply(this,arguments);}function _onFinish(){_onFinish=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values){var newTx;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(contracts);console.log(values.amount.toString());console.log(rollup);_context3.prev=3;if(!(rollup===\"arbitrum\")){_context3.next=10;break;}_context3.next=7;return tx(contracts.Inbox.depositEth(1300000,{value:utils.parseEther(values.amount.toString()),gasLimit:300000}));case 7:newTx=_context3.sent;_context3.next=14;break;case 10:if(!(rollup===\"optimism\")){_context3.next=14;break;}_context3.next=13;return tx(contracts.OVM_L1StandardBridge.depositETH(1300000,\"0x\",{value:utils.parseEther(values.amount.toString())}));case 13:newTx=_context3.sent;case 14:_context3.next=16;return newTx.wait();case 16:console.log(\"woop!\");_context3.next=23;break;case 19:_context3.prev=19;_context3.t0=_context3[\"catch\"](3);console.log(_context3.t0);console.log(\"something went wrong!\");case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[3,19]]);}));return _onFinish.apply(this,arguments);}var onReset=function onReset(){form.resetFields();};var wrongNetwork=selectedChainId!==activeConfig.L1.chainId;return/*#__PURE__*/_jsx(\"div\",{style:{padding:16,width:800,margin:\"auto\",marginBottom:128},children:/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #cccccc\",padding:16,width:800,margin:\"auto\",marginBottom:128},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the L2 Deposit Bridge!\"}),/*#__PURE__*/_jsxs(Radio.Group,{value:rollup,onChange:function onChange(e){setRollup(e.target.value);},style:{marginBottom:10},children:[/*#__PURE__*/_jsx(Radio.Button,{value:\"arbitrum\",children:\"Arbitrum\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"optimism\",children:\"Optimism\"})]}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:data,pagination:false,style:{marginBottom:20}}),/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},formItemLayout),{},{form:form,name:\"control-hooks\",onFinish:onFinish,initialValues:{assetType:\"eth\"},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"assetType\",label:\"Select Asset Type\",rules:[{required:true}],children:/*#__PURE__*/_jsxs(Select,{placeholder:\"Select an asset type\",onChange:onAssetChange,allowClear:true,children:[/*#__PURE__*/_jsx(Option,{value:\"eth\",children:\"ETH\"}),/*#__PURE__*/_jsx(Option,{disabled:true,value:\"erc20\",children:\"ERC-20\"})]})}),/*#__PURE__*/_jsx(Form.Item,{name:\"address\",label:\"Address\",children:/*#__PURE__*/_jsx(Input,{disabled:true,placeholder:address})}),/*#__PURE__*/_jsx(Form.Item,{name:\"amount\",label:\"Amount to bridge\",rules:[{required:true}],children:/*#__PURE__*/_jsx(InputNumber,{})}),/*#__PURE__*/_jsx(Form.Item,_objectSpread(_objectSpread({},tailFormItemLayout),{},{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",disabled:wrongNetwork,children:wrongNetwork?\"Switch wallet to \".concat(activeConfig.L1.name):\"Deposit\"})}))]}))]})});}// Arbitrum Inbox https://rinkeby.etherscan.io/address/0xa157dc79ca26d69c3b1282d03ec42bdee2790a8f#code\nvar ArbitrumInboxABI=[{anonymous:false,inputs:[{indexed:true,internalType:\"uint256\",name:\"messageNum\",type:\"uint256\"},{indexed:false,internalType:\"bytes\",name:\"data\",type:\"bytes\"}],name:\"InboxMessageDelivered\",type:\"event\"},{anonymous:false,inputs:[{indexed:true,internalType:\"uint256\",name:\"messageNum\",type:\"uint256\"}],name:\"InboxMessageDeliveredFromOrigin\",type:\"event\"},{anonymous:false,inputs:[{indexed:false,internalType:\"address\",name:\"newSource\",type:\"address\"}],name:\"WhitelistSourceUpdated\",type:\"event\"},{inputs:[],name:\"bridge\",outputs:[{internalType:\"contract IBridge\",name:\"\",type:\"address\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"destAddr\",type:\"address\"},{internalType:\"uint256\",name:\"l2CallValue\",type:\"uint256\"},{internalType:\"uint256\",name:\"maxSubmissionCost\",type:\"uint256\"},{internalType:\"address\",name:\"excessFeeRefundAddress\",type:\"address\"},{internalType:\"address\",name:\"callValueRefundAddress\",type:\"address\"},{internalType:\"uint256\",name:\"maxGas\",type:\"uint256\"},{internalType:\"uint256\",name:\"gasPriceBid\",type:\"uint256\"},{internalType:\"bytes\",name:\"data\",type:\"bytes\"}],name:\"createRetryableTicket\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"maxSubmissionCost\",type:\"uint256\"}],name:\"depositEth\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"contract IBridge\",name:\"_bridge\",type:\"address\"},{internalType:\"address\",name:\"_whitelist\",type:\"address\"}],name:\"initialize\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],name:\"isMaster\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"maxGas\",type:\"uint256\"},{internalType:\"uint256\",name:\"gasPriceBid\",type:\"uint256\"},{internalType:\"address\",name:\"destAddr\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{internalType:\"bytes\",name:\"data\",type:\"bytes\"}],name:\"sendContractTransaction\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"maxGas\",type:\"uint256\"},{internalType:\"uint256\",name:\"gasPriceBid\",type:\"uint256\"},{internalType:\"address\",name:\"destAddr\",type:\"address\"},{internalType:\"bytes\",name:\"data\",type:\"bytes\"}],name:\"sendL1FundedContractTransaction\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"maxGas\",type:\"uint256\"},{internalType:\"uint256\",name:\"gasPriceBid\",type:\"uint256\"},{internalType:\"uint256\",name:\"nonce\",type:\"uint256\"},{internalType:\"address\",name:\"destAddr\",type:\"address\"},{internalType:\"bytes\",name:\"data\",type:\"bytes\"}],name:\"sendL1FundedUnsignedTransaction\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"bytes\",name:\"messageData\",type:\"bytes\"}],name:\"sendL2Message\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"bytes\",name:\"messageData\",type:\"bytes\"}],name:\"sendL2MessageFromOrigin\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"maxGas\",type:\"uint256\"},{internalType:\"uint256\",name:\"gasPriceBid\",type:\"uint256\"},{internalType:\"uint256\",name:\"nonce\",type:\"uint256\"},{internalType:\"address\",name:\"destAddr\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{internalType:\"bytes\",name:\"data\",type:\"bytes\"}],name:\"sendUnsignedTransaction\",outputs:[{internalType:\"uint256\",name:\"\",type:\"uint256\"}],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"newSource\",type:\"address\"}],name:\"updateWhitelistSource\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[],name:\"whitelist\",outputs:[{internalType:\"address\",name:\"\",type:\"address\"}],stateMutability:\"view\",type:\"function\"}];// https://github.com/ethereum-optimism/optimism/blob/2bd49730fa8d2c10953873f0ccc792198a49d5c9/packages/contracts/contracts/optimistic-ethereum/iOVM/bridge/tokens/iOVM_L1StandardBridge.sol\nvar OVM_L1StandardBridgeABI=[\"function depositETH(uint32 _l2Gas,bytes calldata _data) external payable\",\"function depositETHTo(address _to,uint32 _l2Gas,bytes calldata _data) external payable\",\"function finalizeETHWithdrawal (address _from,address _to,uint _amount,bytes calldata _data) external\"];var L1BridgeMetadata={// Arbitrium Contract's\n44010:{contracts:{Inbox:{address:\"0xA4d796Ad4e79aFB703340a596AEd88f8a5924183\",abi:ArbitrumInboxABI}}},4:{contracts:{Inbox:{address:\"0x578bade599406a8fe3d24fd7f7211c0911f5b29e\",abi:ArbitrumInboxABI}}},// Optimism Contract's\n31337:{contracts:{OVM_L1StandardBridge:{address:\"0x998abeb3E57409262aE5b751f60747921B33613E\",abi:OVM_L1StandardBridgeABI}}},42:{contracts:{OVM_L1StandardBridge:{address:\"0x22F24361D548e5FaAfb36d1437839f080363982B\",abi:OVM_L1StandardBridgeABI}}}};","map":{"version":3,"sources":["C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/packages/react-app/src/components/L2Bridge.jsx"],"names":["utils","ethers","Button","Input","Form","Select","InputNumber","Table","Radio","React","useState","useEffect","useContractLoader","useOnBlock","NETWORKS","Transactor","L2ArbitrumBridge","address","userSigner","L1EthBalance","setL1EthBalance","L2EthBalance","setL2EthBalance","L1Provider","setL1Provider","L2Provider","setL2Provider","rollup","setRollup","environment","setEnvironment","rollupConfig","arbitrum","test","L1","rinkeby","L2","rinkebyArbitrum","main","mainnet","local","localArbitrumL1","localArbitrum","optimism","kovan","kovanOptimism","localOptimismL1","localOptimism","activeConfig","selectedChainId","provider","_network","chainId","tx","setProviders","providers","StaticJsonRpcProvider","rpcUrl","contracts","externalContracts","L1BridgeMetadata","hardhatContracts","console","log","_lastBlockNumber","getBalance","yourL1Balance","formatEther","yourL2Balance","Option","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","columns","title","dataIndex","key","align","name","data","token","l1","l2","useForm","form","onAssetChange","value","onFinish","values","amount","toString","Inbox","depositEth","parseEther","gasLimit","newTx","OVM_L1StandardBridge","depositETH","wait","onReset","resetFields","wrongNetwork","padding","width","margin","marginBottom","border","e","target","assetType","required","ArbitrumInboxABI","anonymous","inputs","indexed","internalType","type","outputs","stateMutability","OVM_L1StandardBridgeABI","abi"],"mappings":"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","sourcesContent":["import { utils, ethers } from \"ethers\";\r\nimport { Button, Input, Form, Select, InputNumber, Table, Radio } from \"antd\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useContractLoader, useOnBlock } from \"../hooks\";\r\nimport { NETWORKS } from \"../constants\";\r\nimport { Transactor } from \"../helpers\";\r\n\r\n/*\r\nThis is a component for bridging between L1 & L2\r\nCurrently it supports Testnet deposits for Arbitrum & Optimism\r\n\r\n __          _______ _____\r\n \\ \\        / /_   _|  __ \\\r\n  \\ \\  /\\  / /  | | | |__) |\r\n   \\ \\/  \\/ /   | | |  ___/\r\n    \\  /\\  /   _| |_| |\r\n     \\/  \\/   |_____|_|\r\n\r\n\r\n*/\r\n\r\nexport default function L2ArbitrumBridge({ address, userSigner }) {\r\n  const [L1EthBalance, setL1EthBalance] = useState(\"...\");\r\n  const [L2EthBalance, setL2EthBalance] = useState(\"...\");\r\n  const [L1Provider, setL1Provider] = useState(\"\");\r\n  const [L2Provider, setL2Provider] = useState(\"\");\r\n  const [rollup, setRollup] = useState(\"arbitrum\");\r\n  const [environment, setEnvironment] = useState(\"test\");\r\n\r\n  const rollupConfig = {\r\n    arbitrum: {\r\n      test: { L1: NETWORKS.rinkeby, L2: NETWORKS.rinkebyArbitrum },\r\n      main: { L1: NETWORKS.mainnet, L2: NETWORKS.arbitrum },\r\n      local: { L1: NETWORKS.localArbitrumL1, L2: NETWORKS.localArbitrum },\r\n    },\r\n    optimism: {\r\n      test: { L1: NETWORKS.kovan, L2: NETWORKS.kovanOptimism },\r\n      local: { L1: NETWORKS.localOptimismL1, L2: NETWORKS.localOptimism },\r\n    },\r\n  };\r\n\r\n  const activeConfig = rollupConfig[rollup][environment];\r\n\r\n  const selectedChainId =\r\n    userSigner && userSigner.provider && userSigner.provider._network && userSigner.provider._network.chainId;\r\n\r\n  const tx = Transactor(userSigner);\r\n\r\n  useEffect(() => {\r\n    async function setProviders() {\r\n      const L1 = activeConfig.L1;\r\n      const L2 = activeConfig.L2;\r\n      setL1Provider(new ethers.providers.StaticJsonRpcProvider(L1.rpcUrl));\r\n      setL2Provider(new ethers.providers.StaticJsonRpcProvider(L2.rpcUrl));\r\n      setL1EthBalance(\"...\");\r\n      setL2EthBalance(\"...\");\r\n    }\r\n    setProviders();\r\n  }, [rollup]);\r\n\r\n  const contracts = useContractLoader(userSigner, { externalContracts: L1BridgeMetadata, hardhatContracts: {} });\r\n\r\n  useOnBlock(L1Provider, async () => {\r\n    console.log(`⛓ A new mainnet block is here: ${L1Provider._lastBlockNumber}`);\r\n    const yourL1Balance = await L1Provider.getBalance(address);\r\n    setL1EthBalance(yourL1Balance ? ethers.utils.formatEther(yourL1Balance) : \"...\");\r\n    const yourL2Balance = await L2Provider.getBalance(address);\r\n    setL2EthBalance(yourL2Balance ? ethers.utils.formatEther(yourL2Balance) : \"...\");\r\n  });\r\n\r\n  const { Option } = Select;\r\n  const formItemLayout = {\r\n    labelCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 8 },\r\n    },\r\n    wrapperCol: {\r\n      xs: { span: 24 },\r\n      sm: { span: 12 },\r\n    },\r\n  };\r\n  const tailFormItemLayout = {\r\n    wrapperCol: {\r\n      xs: {\r\n        span: 24,\r\n        offset: 0,\r\n      },\r\n      sm: {\r\n        span: 12,\r\n        offset: 8,\r\n      },\r\n    },\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"\",\r\n      dataIndex: \"token\",\r\n      key: \"token\",\r\n      align: \"center\",\r\n    },\r\n    {\r\n      title: `${activeConfig.L1.name} L1 Balance`,\r\n      dataIndex: \"l1\",\r\n      key: \"l1\",\r\n      align: \"center\",\r\n    },\r\n    {\r\n      title: `${activeConfig.L1.name} ${rollup} Balance`,\r\n      dataIndex: \"l2\",\r\n      key: \"l2\",\r\n      align: \"center\",\r\n    },\r\n  ];\r\n\r\n  const data = [\r\n    {\r\n      key: \"1\",\r\n      token: \"ETH\",\r\n      l1: \"Ξ\" + L1EthBalance,\r\n      l2: \"Ξ\" + L2EthBalance,\r\n    },\r\n  ];\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const onAssetChange = value => {\r\n    console.log(value);\r\n  };\r\n\r\n  async function onFinish(values) {\r\n    console.log(contracts);\r\n    console.log(values.amount.toString());\r\n    console.log(rollup);\r\n    let newTx;\r\n    try {\r\n      if (rollup === \"arbitrum\") {\r\n        newTx = await tx(\r\n          contracts.Inbox.depositEth(1_300_000, {\r\n            value: utils.parseEther(values.amount.toString()),\r\n            gasLimit: 300000,\r\n          }),\r\n        );\r\n      } else if (rollup === \"optimism\") {\r\n        newTx = await tx(\r\n          contracts.OVM_L1StandardBridge.depositETH(1_300_000, \"0x\", {\r\n            value: utils.parseEther(values.amount.toString()),\r\n          }),\r\n        );\r\n      }\r\n      await newTx.wait();\r\n      console.log(\"woop!\");\r\n    } catch (e) {\r\n      console.log(e);\r\n      console.log(\"something went wrong!\");\r\n    }\r\n  }\r\n\r\n  const onReset = () => {\r\n    form.resetFields();\r\n  };\r\n\r\n  const wrongNetwork = selectedChainId !== activeConfig.L1.chainId;\r\n\r\n  return (\r\n    <div style={{ padding: 16, width: 800, margin: \"auto\", marginBottom: 128 }}>\r\n      <div style={{ border: \"1px solid #cccccc\", padding: 16, width: 800, margin: \"auto\", marginBottom: 128 }}>\r\n        <h2>Welcome to the L2 Deposit Bridge!</h2>\r\n        <Radio.Group\r\n          value={rollup}\r\n          onChange={e => {\r\n            setRollup(e.target.value);\r\n          }}\r\n          style={{ marginBottom: 10 }}\r\n        >\r\n          <Radio.Button value=\"arbitrum\">Arbitrum</Radio.Button>\r\n          <Radio.Button value=\"optimism\">Optimism</Radio.Button>\r\n        </Radio.Group>\r\n\r\n        <Table columns={columns} dataSource={data} pagination={false} style={{ marginBottom: 20 }} />\r\n\r\n        <Form\r\n          {...formItemLayout}\r\n          form={form}\r\n          name=\"control-hooks\"\r\n          onFinish={onFinish}\r\n          initialValues={{ assetType: \"eth\" }}\r\n        >\r\n          <Form.Item\r\n            name=\"assetType\"\r\n            label=\"Select Asset Type\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n              },\r\n            ]}\r\n          >\r\n            <Select placeholder=\"Select an asset type\" onChange={onAssetChange} allowClear>\r\n              <Option value=\"eth\">ETH</Option>\r\n              <Option disabled value=\"erc20\">\r\n                ERC-20\r\n              </Option>\r\n            </Select>\r\n          </Form.Item>\r\n          <Form.Item name=\"address\" label=\"Address\">\r\n            <Input disabled placeholder={address} />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"amount\"\r\n            label=\"Amount to bridge\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n              },\r\n            ]}\r\n          >\r\n            <InputNumber />\r\n          </Form.Item>\r\n          <Form.Item {...tailFormItemLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\" disabled={wrongNetwork}>\r\n              {wrongNetwork ? `Switch wallet to ${activeConfig.L1.name}` : \"Deposit\"}\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Arbitrum Inbox https://rinkeby.etherscan.io/address/0xa157dc79ca26d69c3b1282d03ec42bdee2790a8f#code\r\nconst ArbitrumInboxABI = [\r\n  {\r\n    anonymous: false,\r\n    inputs: [\r\n      { indexed: true, internalType: \"uint256\", name: \"messageNum\", type: \"uint256\" },\r\n      { indexed: false, internalType: \"bytes\", name: \"data\", type: \"bytes\" },\r\n    ],\r\n    name: \"InboxMessageDelivered\",\r\n    type: \"event\",\r\n  },\r\n  {\r\n    anonymous: false,\r\n    inputs: [{ indexed: true, internalType: \"uint256\", name: \"messageNum\", type: \"uint256\" }],\r\n    name: \"InboxMessageDeliveredFromOrigin\",\r\n    type: \"event\",\r\n  },\r\n  {\r\n    anonymous: false,\r\n    inputs: [{ indexed: false, internalType: \"address\", name: \"newSource\", type: \"address\" }],\r\n    name: \"WhitelistSourceUpdated\",\r\n    type: \"event\",\r\n  },\r\n  {\r\n    inputs: [],\r\n    name: \"bridge\",\r\n    outputs: [{ internalType: \"contract IBridge\", name: \"\", type: \"address\" }],\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [\r\n      { internalType: \"address\", name: \"destAddr\", type: \"address\" },\r\n      { internalType: \"uint256\", name: \"l2CallValue\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"maxSubmissionCost\", type: \"uint256\" },\r\n      { internalType: \"address\", name: \"excessFeeRefundAddress\", type: \"address\" },\r\n      { internalType: \"address\", name: \"callValueRefundAddress\", type: \"address\" },\r\n      { internalType: \"uint256\", name: \"maxGas\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"gasPriceBid\", type: \"uint256\" },\r\n      { internalType: \"bytes\", name: \"data\", type: \"bytes\" },\r\n    ],\r\n    name: \"createRetryableTicket\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [{ internalType: \"uint256\", name: \"maxSubmissionCost\", type: \"uint256\" }],\r\n    name: \"depositEth\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [\r\n      { internalType: \"contract IBridge\", name: \"_bridge\", type: \"address\" },\r\n      { internalType: \"address\", name: \"_whitelist\", type: \"address\" },\r\n    ],\r\n    name: \"initialize\",\r\n    outputs: [],\r\n    stateMutability: \"nonpayable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [],\r\n    name: \"isMaster\",\r\n    outputs: [{ internalType: \"bool\", name: \"\", type: \"bool\" }],\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [\r\n      { internalType: \"uint256\", name: \"maxGas\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"gasPriceBid\", type: \"uint256\" },\r\n      { internalType: \"address\", name: \"destAddr\", type: \"address\" },\r\n      { internalType: \"uint256\", name: \"amount\", type: \"uint256\" },\r\n      { internalType: \"bytes\", name: \"data\", type: \"bytes\" },\r\n    ],\r\n    name: \"sendContractTransaction\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"nonpayable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [\r\n      { internalType: \"uint256\", name: \"maxGas\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"gasPriceBid\", type: \"uint256\" },\r\n      { internalType: \"address\", name: \"destAddr\", type: \"address\" },\r\n      { internalType: \"bytes\", name: \"data\", type: \"bytes\" },\r\n    ],\r\n    name: \"sendL1FundedContractTransaction\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [\r\n      { internalType: \"uint256\", name: \"maxGas\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"gasPriceBid\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"nonce\", type: \"uint256\" },\r\n      { internalType: \"address\", name: \"destAddr\", type: \"address\" },\r\n      { internalType: \"bytes\", name: \"data\", type: \"bytes\" },\r\n    ],\r\n    name: \"sendL1FundedUnsignedTransaction\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"payable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [{ internalType: \"bytes\", name: \"messageData\", type: \"bytes\" }],\r\n    name: \"sendL2Message\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"nonpayable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [{ internalType: \"bytes\", name: \"messageData\", type: \"bytes\" }],\r\n    name: \"sendL2MessageFromOrigin\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"nonpayable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [\r\n      { internalType: \"uint256\", name: \"maxGas\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"gasPriceBid\", type: \"uint256\" },\r\n      { internalType: \"uint256\", name: \"nonce\", type: \"uint256\" },\r\n      { internalType: \"address\", name: \"destAddr\", type: \"address\" },\r\n      { internalType: \"uint256\", name: \"amount\", type: \"uint256\" },\r\n      { internalType: \"bytes\", name: \"data\", type: \"bytes\" },\r\n    ],\r\n    name: \"sendUnsignedTransaction\",\r\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\r\n    stateMutability: \"nonpayable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [{ internalType: \"address\", name: \"newSource\", type: \"address\" }],\r\n    name: \"updateWhitelistSource\",\r\n    outputs: [],\r\n    stateMutability: \"nonpayable\",\r\n    type: \"function\",\r\n  },\r\n  {\r\n    inputs: [],\r\n    name: \"whitelist\",\r\n    outputs: [{ internalType: \"address\", name: \"\", type: \"address\" }],\r\n    stateMutability: \"view\",\r\n    type: \"function\",\r\n  },\r\n];\r\n\r\n// https://github.com/ethereum-optimism/optimism/blob/2bd49730fa8d2c10953873f0ccc792198a49d5c9/packages/contracts/contracts/optimistic-ethereum/iOVM/bridge/tokens/iOVM_L1StandardBridge.sol\r\nconst OVM_L1StandardBridgeABI = [\r\n  \"function depositETH(uint32 _l2Gas,bytes calldata _data) external payable\",\r\n  \"function depositETHTo(address _to,uint32 _l2Gas,bytes calldata _data) external payable\",\r\n  \"function finalizeETHWithdrawal (address _from,address _to,uint _amount,bytes calldata _data) external\",\r\n];\r\n\r\nconst L1BridgeMetadata = {\r\n  // Arbitrium Contract's\r\n  44010: {\r\n    contracts: {\r\n      Inbox: {\r\n        address: \"0xA4d796Ad4e79aFB703340a596AEd88f8a5924183\",\r\n        abi: ArbitrumInboxABI,\r\n      },\r\n    },\r\n  },\r\n  4: {\r\n    contracts: {\r\n      Inbox: {\r\n        address: \"0x578bade599406a8fe3d24fd7f7211c0911f5b29e\",\r\n        abi: ArbitrumInboxABI,\r\n      },\r\n    },\r\n  },\r\n  // Optimism Contract's\r\n  31337: {\r\n    contracts: {\r\n      OVM_L1StandardBridge: {\r\n        address: \"0x998abeb3E57409262aE5b751f60747921B33613E\",\r\n        abi: OVM_L1StandardBridgeABI,\r\n      },\r\n    },\r\n  },\r\n  42: {\r\n    contracts: {\r\n      OVM_L1StandardBridge: {\r\n        address: \"0x22F24361D548e5FaAfb36d1437839f080363982B\",\r\n        abi: OVM_L1StandardBridgeABI,\r\n      },\r\n    },\r\n  },\r\n};\r\n"]},"metadata":{},"sourceType":"module"}