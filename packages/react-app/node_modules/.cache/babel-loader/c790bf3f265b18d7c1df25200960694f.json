{"ast":null,"code":"import _toConsumableArray from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Button,Col,Divider,Input,Row,Tooltip}from\"antd\";import React,{useState}from\"react\";import Blockies from\"react-blockies\";import{Transactor}from\"../../helpers\";import tryToDisplay from\"./utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"ethers\"),utils=_require.utils,BigNumber=_require.BigNumber;export default function FunctionForm(_ref){var contractFunction=_ref.contractFunction,functionInfo=_ref.functionInfo,provider=_ref.provider,gasPrice=_ref.gasPrice,triggerRefresh=_ref.triggerRefresh;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),txValue=_useState4[0],setTxValue=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),returnValue=_useState6[0],setReturnValue=_useState6[1];var tx=Transactor(provider,gasPrice);var inputIndex=0;var inputs=functionInfo.inputs.map(function(input){var key=functionInfo.name+\"_\"+input.name+\"_\"+input.type+\"_\"+inputIndex++;var buttons=\"\";if(input.type===\"bytes32\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"to bytes32\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formUpdate,_formUpdate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(utils.isHexString(form[key])){formUpdate=_objectSpread({},form);formUpdate[key]=utils.parseBytes32String(form[key]);setForm(formUpdate);}else{_formUpdate=_objectSpread({},form);_formUpdate[key]=utils.formatBytes32String(form[key]);setForm(_formUpdate);}case 1:case\"end\":return _context.stop();}}},_callee);})),children:\"#\\uFE0F\\u20E3\"})});}else if(input.type===\"bytes\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"to hex\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var formUpdate,_formUpdate2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(utils.isHexString(form[key])){formUpdate=_objectSpread({},form);formUpdate[key]=utils.toUtf8String(form[key]);setForm(formUpdate);}else{_formUpdate2=_objectSpread({},form);_formUpdate2[key]=utils.hexlify(utils.toUtf8Bytes(form[key]));setForm(_formUpdate2);}case 1:case\"end\":return _context2.stop();}}},_callee2);})),children:\"#\\uFE0F\\u20E3\"})});}else if(input.type===\"uint256\"){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"* 10 ** 18\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var formUpdate;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formUpdate=_objectSpread({},form);formUpdate[key]=utils.parseEther(form[key]);setForm(formUpdate);case 3:case\"end\":return _context3.stop();}}},_callee3);})),children:\"\\u2734\\uFE0F\"})});}else if(input.type===\"address\"){var possibleAddress=form[key]&&form[key].toLowerCase&&form[key].toLowerCase().trim();if(possibleAddress&&possibleAddress.length===42){buttons=/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"blockie\",children:/*#__PURE__*/_jsx(Blockies,{seed:possibleAddress,scale:3})});}}return/*#__PURE__*/_jsx(\"div\",{style:{margin:2},children:/*#__PURE__*/_jsx(Input,{size:\"large\",placeholder:input.name?input.type+\" \"+input.name:input.type,autoComplete:\"off\",value:form[key],name:key,onChange:function onChange(event){var formUpdate=_objectSpread({},form);formUpdate[event.target.name]=event.target.value;setForm(formUpdate);},suffix:buttons})},key);});var txValueInput=/*#__PURE__*/_jsx(\"div\",{style:{margin:2},children:/*#__PURE__*/_jsx(Input,{placeholder:\"transaction value\",onChange:function onChange(e){return setTxValue(e.target.value);},value:txValue,addonAfter:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\" * 10^18 \",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var floatValue;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:floatValue=parseFloat(txValue);if(floatValue)setTxValue(\"\"+floatValue*Math.pow(10,18));case 2:case\"end\":return _context4.stop();}}},_callee4);})),children:\"\\u2733\\uFE0F\"})})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(Tooltip,{placement:\"right\",title:\"number to hex\",children:/*#__PURE__*/_jsx(\"div\",{type:\"dashed\",style:{cursor:\"pointer\"},onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setTxValue(BigNumber.from(txValue).toHexString());case 1:case\"end\":return _context5.stop();}}},_callee5);})),children:\"#\\uFE0F\\u20E3\"})})})]})})})},\"txValueInput\");if(functionInfo.payable){inputs.push(txValueInput);}var buttonIcon=functionInfo.type===\"call\"?/*#__PURE__*/_jsx(Button,{style:{marginLeft:-32},children:\"Read\\uD83D\\uDCE1\"}):/*#__PURE__*/_jsx(Button,{style:{marginLeft:-32},children:\"Send\\uD83D\\uDCB8\"});inputs.push(/*#__PURE__*/_jsx(\"div\",{style:{cursor:\"pointer\",margin:2},children:/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setReturnValue(e.target.value);},defaultValue:\"\",bordered:false,disabled:true,value:returnValue,suffix:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:30,margin:0},type:\"default\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var innerIndex,args,result,returned,overrides,_returned;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:innerIndex=0;args=functionInfo.inputs.map(function(input){var key=functionInfo.name+\"_\"+input.name+\"_\"+input.type+\"_\"+innerIndex++;var value=form[key];if(input.baseType===\"array\"){value=JSON.parse(value);}else if(input.type===\"bool\"){if(value===\"true\"||value===\"1\"||value===\"0x1\"||value===\"0x01\"||value===\"0x0001\"){value=1;}else{value=0;}}return value;});if(!(functionInfo.stateMutability===\"view\"||functionInfo.stateMutability===\"pure\")){_context6.next=9;break;}_context6.next=5;return contractFunction.apply(void 0,_toConsumableArray(args));case 5:returned=_context6.sent;result=tryToDisplay(returned);_context6.next=16;break;case 9:overrides={};if(txValue){overrides.value=txValue;// ethers.utils.parseEther()\n}if(gasPrice){overrides.gasPrice=gasPrice;}// Uncomment this if you want to skip the gas estimation for each transaction\n// overrides.gasLimit = hexlify(1200000);\n// console.log(\"Running with extras\",extras)\n_context6.next=14;return tx(contractFunction.apply(void 0,_toConsumableArray(args).concat([overrides])));case 14:_returned=_context6.sent;result=tryToDisplay(_returned);case 16:console.log(\"SETTING RESULT:\",result);setReturnValue(result);triggerRefresh(true);case 19:case\"end\":return _context6.stop();}}},_callee6);})),children:buttonIcon})})},\"goButton\"));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:8,style:{textAlign:\"right\",opacity:0.333,paddingRight:6,fontSize:24},children:functionInfo.name}),/*#__PURE__*/_jsx(Col,{span:16,children:inputs})]}),/*#__PURE__*/_jsx(Divider,{})]});}","map":{"version":3,"sources":["C:/Users/KINSHUK/Desktop/ETH/qd-off-chain-voters-and-candidates/packages/react-app/src/components/Contract/FunctionForm.jsx"],"names":["Button","Col","Divider","Input","Row","Tooltip","React","useState","Blockies","Transactor","tryToDisplay","require","utils","BigNumber","FunctionForm","contractFunction","functionInfo","provider","gasPrice","triggerRefresh","form","setForm","txValue","setTxValue","returnValue","setReturnValue","tx","inputIndex","inputs","map","input","key","name","type","buttons","cursor","isHexString","formUpdate","parseBytes32String","formatBytes32String","toUtf8String","hexlify","toUtf8Bytes","parseEther","possibleAddress","toLowerCase","trim","length","margin","event","target","value","txValueInput","e","floatValue","parseFloat","from","toHexString","payable","push","buttonIcon","marginLeft","width","height","innerIndex","args","baseType","JSON","parse","stateMutability","returned","result","overrides","console","log","textAlign","opacity","paddingRight","fontSize"],"mappings":"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","sourcesContent":["import { Button, Col, Divider, Input, Row, Tooltip } from \"antd\";\r\nimport React, { useState } from \"react\";\r\nimport Blockies from \"react-blockies\";\r\nimport { Transactor } from \"../../helpers\";\r\nimport tryToDisplay from \"./utils\";\r\n\r\nconst { utils, BigNumber } = require(\"ethers\");\r\n\r\nexport default function FunctionForm({ contractFunction, functionInfo, provider, gasPrice, triggerRefresh }) {\r\n  const [form, setForm] = useState({});\r\n  const [txValue, setTxValue] = useState();\r\n  const [returnValue, setReturnValue] = useState();\r\n\r\n  const tx = Transactor(provider, gasPrice);\r\n\r\n  let inputIndex = 0;\r\n  const inputs = functionInfo.inputs.map(input => {\r\n    const key = functionInfo.name + \"_\" + input.name + \"_\" + input.type + \"_\" + inputIndex++;\r\n\r\n    let buttons = \"\";\r\n    if (input.type === \"bytes32\") {\r\n      buttons = (\r\n        <Tooltip placement=\"right\" title=\"to bytes32\">\r\n          <div\r\n            type=\"dashed\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={async () => {\r\n              if (utils.isHexString(form[key])) {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.parseBytes32String(form[key]);\r\n                setForm(formUpdate);\r\n              } else {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.formatBytes32String(form[key]);\r\n                setForm(formUpdate);\r\n              }\r\n            }}\r\n          >\r\n            #️⃣\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    } else if (input.type === \"bytes\") {\r\n      buttons = (\r\n        <Tooltip placement=\"right\" title=\"to hex\">\r\n          <div\r\n            type=\"dashed\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={async () => {\r\n              if (utils.isHexString(form[key])) {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.toUtf8String(form[key]);\r\n                setForm(formUpdate);\r\n              } else {\r\n                const formUpdate = { ...form };\r\n                formUpdate[key] = utils.hexlify(utils.toUtf8Bytes(form[key]));\r\n                setForm(formUpdate);\r\n              }\r\n            }}\r\n          >\r\n            #️⃣\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    } else if (input.type === \"uint256\") {\r\n      buttons = (\r\n        <Tooltip placement=\"right\" title=\"* 10 ** 18\">\r\n          <div\r\n            type=\"dashed\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={async () => {\r\n              const formUpdate = { ...form };\r\n              formUpdate[key] = utils.parseEther(form[key]);\r\n              setForm(formUpdate);\r\n            }}\r\n          >\r\n            ✴️\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    } else if (input.type === \"address\") {\r\n      const possibleAddress = form[key] && form[key].toLowerCase && form[key].toLowerCase().trim();\r\n      if (possibleAddress && possibleAddress.length === 42) {\r\n        buttons = (\r\n          <Tooltip placement=\"right\" title=\"blockie\">\r\n            <Blockies seed={possibleAddress} scale={3} />\r\n          </Tooltip>\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div style={{ margin: 2 }} key={key}>\r\n        <Input\r\n          size=\"large\"\r\n          placeholder={input.name ? input.type + \" \" + input.name : input.type}\r\n          autoComplete=\"off\"\r\n          value={form[key]}\r\n          name={key}\r\n          onChange={event => {\r\n            const formUpdate = { ...form };\r\n            formUpdate[event.target.name] = event.target.value;\r\n            setForm(formUpdate);\r\n          }}\r\n          suffix={buttons}\r\n        />\r\n      </div>\r\n    );\r\n  });\r\n\r\n  const txValueInput = (\r\n    <div style={{ margin: 2 }} key=\"txValueInput\">\r\n      <Input\r\n        placeholder=\"transaction value\"\r\n        onChange={e => setTxValue(e.target.value)}\r\n        value={txValue}\r\n        addonAfter={\r\n          <div>\r\n            <Row>\r\n              <Col span={16}>\r\n                <Tooltip placement=\"right\" title=\" * 10^18 \">\r\n                  <div\r\n                    type=\"dashed\"\r\n                    style={{ cursor: \"pointer\" }}\r\n                    onClick={async () => {\r\n                      const floatValue = parseFloat(txValue);\r\n                      if (floatValue) setTxValue(\"\" + floatValue * 10 ** 18);\r\n                    }}\r\n                  >\r\n                    ✳️\r\n                  </div>\r\n                </Tooltip>\r\n              </Col>\r\n              <Col span={16}>\r\n                <Tooltip placement=\"right\" title=\"number to hex\">\r\n                  <div\r\n                    type=\"dashed\"\r\n                    style={{ cursor: \"pointer\" }}\r\n                    onClick={async () => {\r\n                      setTxValue(BigNumber.from(txValue).toHexString());\r\n                    }}\r\n                  >\r\n                    #️⃣\r\n                  </div>\r\n                </Tooltip>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n\r\n  if (functionInfo.payable) {\r\n    inputs.push(txValueInput);\r\n  }\r\n\r\n  const buttonIcon =\r\n    functionInfo.type === \"call\" ? (\r\n      <Button style={{ marginLeft: -32 }}>Read📡</Button>\r\n    ) : (\r\n      <Button style={{ marginLeft: -32 }}>Send💸</Button>\r\n    );\r\n  inputs.push(\r\n    <div style={{ cursor: \"pointer\", margin: 2 }} key=\"goButton\">\r\n      <Input\r\n        onChange={e => setReturnValue(e.target.value)}\r\n        defaultValue=\"\"\r\n        bordered={false}\r\n        disabled\r\n        value={returnValue}\r\n        suffix={\r\n          <div\r\n            style={{ width: 50, height: 30, margin: 0 }}\r\n            type=\"default\"\r\n            onClick={async () => {\r\n              let innerIndex = 0;\r\n              const args = functionInfo.inputs.map(input => {\r\n                const key = functionInfo.name + \"_\" + input.name + \"_\" + input.type + \"_\" + innerIndex++;\r\n                let value = form[key];\r\n                if (input.baseType === \"array\") {\r\n                  value = JSON.parse(value);\r\n                } else if (input.type === \"bool\") {\r\n                  if (value === \"true\" || value === \"1\" || value === \"0x1\" || value === \"0x01\" || value === \"0x0001\") {\r\n                    value = 1;\r\n                  } else {\r\n                    value = 0;\r\n                  }\r\n                }\r\n                return value;\r\n              });\r\n\r\n              let result;\r\n              if (functionInfo.stateMutability === \"view\" || functionInfo.stateMutability === \"pure\") {\r\n                const returned = await contractFunction(...args);\r\n                result = tryToDisplay(returned);\r\n              } else {\r\n                const overrides = {};\r\n                if (txValue) {\r\n                  overrides.value = txValue; // ethers.utils.parseEther()\r\n                }\r\n                if (gasPrice) {\r\n                  overrides.gasPrice = gasPrice;\r\n                }\r\n                // Uncomment this if you want to skip the gas estimation for each transaction\r\n                // overrides.gasLimit = hexlify(1200000);\r\n\r\n                // console.log(\"Running with extras\",extras)\r\n                const returned = await tx(contractFunction(...args, overrides));\r\n                result = tryToDisplay(returned);\r\n              }\r\n\r\n              console.log(\"SETTING RESULT:\", result);\r\n              setReturnValue(result);\r\n              triggerRefresh(true);\r\n            }}\r\n          >\r\n            {buttonIcon}\r\n          </div>\r\n        }\r\n      />\r\n    </div>,\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Row>\r\n        <Col\r\n          span={8}\r\n          style={{\r\n            textAlign: \"right\",\r\n            opacity: 0.333,\r\n            paddingRight: 6,\r\n            fontSize: 24,\r\n          }}\r\n        >\r\n          {functionInfo.name}\r\n        </Col>\r\n        <Col span={16}>{inputs}</Col>\r\n      </Row>\r\n      <Divider />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}